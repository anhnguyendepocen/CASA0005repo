<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Introduction to R | CASA0005 Geographic Information Systems and Science</title>
  <meta name="description" content="The CASA0005 Geographic Information Systems and Science practical book" />
  <meta name="generator" content="bookdown 0.20.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Introduction to R | CASA0005 Geographic Information Systems and Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://andrewmaclachlan.github.io/CASA0005repo/" />
  <meta property="og:image" content="https://andrewmaclachlan.github.io/CASA0005repo/general_images/casa_logo.png" />
  <meta property="og:description" content="The CASA0005 Geographic Information Systems and Science practical book" />
  <meta name="github-repo" content="andrewmaclachlan/CASA0005repo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Introduction to R | CASA0005 Geographic Information Systems and Science" />
  
  <meta name="twitter:description" content="The CASA0005 Geographic Information Systems and Science practical book" />
  <meta name="twitter:image" content="https://andrewmaclachlan.github.io/CASA0005repo/general_images/casa_logo.png" />

<meta name="author" content="Andy MacLachlan and Adam Dennett" />


<meta name="date" content="2020-08-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="assets/apple-touch-icon.png" />
  <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" />
<link rel="prev" href="geographic-information.html"/>
<link rel="next" href="rasters-descriptive-statistics-and-interpolation.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.14/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151934476-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151934476-1');
</script>
<script src="assets/book.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="assets\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="https://www.ucl.ac.uk/module-catalogue/modules/geographic-information-systems-and-science-CASA0005"><img src="general_images/casa_logo.jpg"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgement"><i class="fa fa-check"></i>Acknowledgement</a></li>
</ul></li>
<li class="part"><span><b>Course information</b></span></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html"><i class="fa fa-check"></i>Hello GIS</a><ul>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#intended-course-learning-outcomes"><i class="fa fa-check"></i>Intended course learning outcomes</a></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#how-to-use-this-book"><i class="fa fa-check"></i>How to use this book</a></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#getting-started"><i class="fa fa-check"></i>Getting started</a></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#how-to-download-data-and-files-from-github"><i class="fa fa-check"></i>How to download data and files from GitHub</a><ul>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#option-1"><i class="fa fa-check"></i>Option 1</a></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#option-2"><i class="fa fa-check"></i>Option 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#self-guided-learning"><i class="fa fa-check"></i>Self guided learning</a></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#interactive-lectures"><i class="fa fa-check"></i>Interactive lectures</a></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#more-help"><i class="fa fa-check"></i>More help</a></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#noticed-a-mistake"><i class="fa fa-check"></i>Noticed a mistake?</a></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#assignment-resources"><i class="fa fa-check"></i>Assignment resources</a></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#reading-list"><i class="fa fa-check"></i>Reading list</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="software-installation.html"><a href="software-installation.html"><i class="fa fa-check"></i>Software installation</a><ul>
<li class="chapter" data-level="" data-path="software-installation.html"><a href="software-installation.html#qgis"><i class="fa fa-check"></i>QGIS</a></li>
<li class="chapter" data-level="" data-path="software-installation.html"><a href="software-installation.html#r"><i class="fa fa-check"></i>R</a><ul>
<li class="chapter" data-level="" data-path="software-installation.html"><a href="software-installation.html#setup-1"><i class="fa fa-check"></i>Setup 1</a></li>
<li class="chapter" data-level="" data-path="software-installation.html"><a href="software-installation.html#setup-2"><i class="fa fa-check"></i>Setup 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="software-installation.html"><a href="software-installation.html#arcgis"><i class="fa fa-check"></i>ArcGIS</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html"><i class="fa fa-check"></i>External usage</a><ul>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html#how-to-adopt-this-course"><i class="fa fa-check"></i>How to adopt this course</a></li>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html#issues-contributions"><i class="fa fa-check"></i>Issues / contributions</a></li>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html#version"><i class="fa fa-check"></i>Version</a></li>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html#packages"><i class="fa fa-check"></i>Packages</a></li>
</ul></li>
<li class="part"><span><b>I GIS tools</b></span></li>
<li class="chapter" data-level="1" data-path="geographic-information.html"><a href="geographic-information.html"><i class="fa fa-check"></i><b>1</b> Geographic Information</a><ul>
<li class="chapter" data-level="1.1" data-path="geographic-information.html"><a href="geographic-information.html#learning-outcomes"><i class="fa fa-check"></i><b>1.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="1.2" data-path="geographic-information.html"><a href="geographic-information.html#homework"><i class="fa fa-check"></i><b>1.2</b> Homework</a></li>
<li class="chapter" data-level="1.3" data-path="geographic-information.html"><a href="geographic-information.html#recommended-listening"><i class="fa fa-check"></i><b>1.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="1.4" data-path="geographic-information.html"><a href="geographic-information.html#the-basics-of-geographic-information"><i class="fa fa-check"></i><b>1.4</b> The Basics of Geographic Information</a><ul>
<li class="chapter" data-level="1.4.1" data-path="geographic-information.html"><a href="geographic-information.html#data-types-in-statistics"><i class="fa fa-check"></i><b>1.4.1</b> Data types in statistics</a></li>
<li class="chapter" data-level="1.4.2" data-path="geographic-information.html"><a href="geographic-information.html#important-gis-data-formats"><i class="fa fa-check"></i><b>1.4.2</b> Important GIS data formats</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="geographic-information.html"><a href="geographic-information.html#general-data-flow"><i class="fa fa-check"></i><b>1.5</b> General data flow</a></li>
<li class="chapter" data-level="1.6" data-path="geographic-information.html"><a href="geographic-information.html#data"><i class="fa fa-check"></i><b>1.6</b> Data</a><ul>
<li class="chapter" data-level="1.6.1" data-path="geographic-information.html"><a href="geographic-information.html#file-paths"><i class="fa fa-check"></i><b>1.6.1</b> File paths</a></li>
<li class="chapter" data-level="1.6.2" data-path="geographic-information.html"><a href="geographic-information.html#data-download"><i class="fa fa-check"></i><b>1.6.2</b> Data download</a></li>
<li class="chapter" data-level="1.6.3" data-path="geographic-information.html"><a href="geographic-information.html#data-pre-processing"><i class="fa fa-check"></i><b>1.6.3</b> Data pre-processing</a></li>
<li class="chapter" data-level="1.6.4" data-path="geographic-information.html"><a href="geographic-information.html#qgis-1"><i class="fa fa-check"></i><b>1.6.4</b> QGIS</a></li>
<li class="chapter" data-level="1.6.5" data-path="geographic-information.html"><a href="geographic-information.html#r-1"><i class="fa fa-check"></i><b>1.6.5</b> R</a></li>
<li class="chapter" data-level="1.6.6" data-path="geographic-information.html"><a href="geographic-information.html#export-data-1"><i class="fa fa-check"></i><b>1.6.6</b> Export data</a></li>
<li class="chapter" data-level="1.6.7" data-path="geographic-information.html"><a href="geographic-information.html#what-will-i-use-1"><i class="fa fa-check"></i><b>1.6.7</b> What will I use</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="geographic-information.html"><a href="geographic-information.html#data-sources-and-task"><i class="fa fa-check"></i><b>1.7</b> Data sources and task</a><ul>
<li class="chapter" data-level="1.7.1" data-path="geographic-information.html"><a href="geographic-information.html#uk-data-service"><i class="fa fa-check"></i><b>1.7.1</b> UK Data Service</a></li>
<li class="chapter" data-level="1.7.2" data-path="geographic-information.html"><a href="geographic-information.html#ons"><i class="fa fa-check"></i><b>1.7.2</b> ONS</a></li>
<li class="chapter" data-level="1.7.3" data-path="geographic-information.html"><a href="geographic-information.html#nomis"><i class="fa fa-check"></i><b>1.7.3</b> nomis</a></li>
<li class="chapter" data-level="1.7.4" data-path="geographic-information.html"><a href="geographic-information.html#os"><i class="fa fa-check"></i><b>1.7.4</b> OS</a></li>
<li class="chapter" data-level="1.7.5" data-path="geographic-information.html"><a href="geographic-information.html#edina-digimap"><i class="fa fa-check"></i><b>1.7.5</b> Edina Digimap</a></li>
<li class="chapter" data-level="1.7.6" data-path="geographic-information.html"><a href="geographic-information.html#osm"><i class="fa fa-check"></i><b>1.7.6</b> OSM</a></li>
<li class="chapter" data-level="1.7.7" data-path="geographic-information.html"><a href="geographic-information.html#defra"><i class="fa fa-check"></i><b>1.7.7</b> DEFRA</a></li>
<li class="chapter" data-level="1.7.8" data-path="geographic-information.html"><a href="geographic-information.html#data-lists"><i class="fa fa-check"></i><b>1.7.8</b> Data lists</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="geographic-information.html"><a href="geographic-information.html#summary"><i class="fa fa-check"></i><b>1.8</b> Summary</a></li>
<li class="chapter" data-level="1.9" data-path="geographic-information.html"><a href="geographic-information.html#feedback"><i class="fa fa-check"></i><b>1.9</b> Feedback</a></li>
<li class="chapter" data-level="1.10" data-path="geographic-information.html"><a href="geographic-information.html#mac-r-issues"><i class="fa fa-check"></i><b>1.10</b> Mac R issues</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#learning-outcomes-1"><i class="fa fa-check"></i><b>2.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#homework-1"><i class="fa fa-check"></i><b>2.2</b> Homework</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#recommended-listening-1"><i class="fa fa-check"></i><b>2.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#introduction-1"><i class="fa fa-check"></i><b>2.4</b> Introduction</a><ul>
<li class="chapter" data-level="2.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#online-forums-are-your-friend"><i class="fa fa-check"></i><b>2.4.1</b> Online forums are your friend!!</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#health-warning"><i class="fa fa-check"></i><b>2.4.2</b> Health warning</a></li>
<li class="chapter" data-level="2.4.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-and-rstudio"><i class="fa fa-check"></i><b>2.4.3</b> R and RStudio</a></li>
<li class="chapter" data-level="2.4.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-started-1"><i class="fa fa-check"></i><b>2.4.4</b> Getting started</a></li>
<li class="chapter" data-level="2.4.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basics"><i class="fa fa-check"></i><b>2.4.5</b> Basics</a></li>
<li class="chapter" data-level="2.4.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#scripts-and-some-basic-commands"><i class="fa fa-check"></i><b>2.4.6</b> Scripts and some basic commands</a></li>
<li class="chapter" data-level="2.4.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#functions"><i class="fa fa-check"></i><b>2.4.7</b> Functions</a></li>
<li class="chapter" data-level="2.4.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-plotting"><i class="fa fa-check"></i><b>2.4.8</b> Basic plotting</a></li>
<li class="chapter" data-level="2.4.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#help"><i class="fa fa-check"></i><b>2.4.9</b> Help</a></li>
<li class="chapter" data-level="2.4.10" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-structures"><i class="fa fa-check"></i><b>2.4.10</b> Data structures</a></li>
<li class="chapter" data-level="2.4.11" data-path="introduction-to-r.html"><a href="introduction-to-r.html#elements-of-a-data-frame"><i class="fa fa-check"></i><b>2.4.11</b> Elements of a data frame</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#reading-data-into-r"><i class="fa fa-check"></i><b>2.5</b> Reading data into R</a><ul>
<li class="chapter" data-level="2.5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#old-skool-cleaning"><i class="fa fa-check"></i><b>2.5.1</b> Old skool cleaning</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#here"><i class="fa fa-check"></i><b>2.5.2</b> Here</a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#new-skool-cleaning"><i class="fa fa-check"></i><b>2.5.3</b> New skool cleaning</a></li>
<li class="chapter" data-level="2.5.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#examining-your-new-data"><i class="fa fa-check"></i><b>2.5.4</b> Examining your new data</a></li>
<li class="chapter" data-level="2.5.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-manipulation-in-r"><i class="fa fa-check"></i><b>2.5.5</b> Data manipulation in R</a></li>
<li class="chapter" data-level="2.5.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#plotting"><i class="fa fa-check"></i><b>2.5.6</b> Plotting</a></li>
<li class="chapter" data-level="2.5.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#pimp-my-graph"><i class="fa fa-check"></i><b>2.5.7</b> Pimp my graph!</a></li>
<li class="chapter" data-level="2.5.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#spatial-data-in-r"><i class="fa fa-check"></i><b>2.5.8</b> Spatial Data in R</a></li>
<li class="chapter" data-level="2.5.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#simple-mapping"><i class="fa fa-check"></i><b>2.5.9</b> Simple mapping</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#tidying-data"><i class="fa fa-check"></i><b>2.6</b> Tidying data</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#feedback-1"><i class="fa fa-check"></i><b>2.7</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html"><i class="fa fa-check"></i><b>3</b> Rasters, descriptive statistics and interpolation</a><ul>
<li class="chapter" data-level="3.1" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#learning-outcomes-2"><i class="fa fa-check"></i><b>3.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="3.2" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#homework-2"><i class="fa fa-check"></i><b>3.2</b> Homework</a></li>
<li class="chapter" data-level="3.3" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#recommended-listening-2"><i class="fa fa-check"></i><b>3.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="3.4" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#introduction-2"><i class="fa fa-check"></i><b>3.4</b> Introduction</a></li>
<li class="chapter" data-level="3.5" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#part-1-projections"><i class="fa fa-check"></i><b>3.5</b> Part 1 projections</a><ul>
<li class="chapter" data-level="3.5.1" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#changing-projections"><i class="fa fa-check"></i><b>3.5.1</b> Changing projections</a></li>
<li class="chapter" data-level="3.5.2" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#worldclim-data"><i class="fa fa-check"></i><b>3.5.2</b> WorldClim data</a></li>
<li class="chapter" data-level="3.5.3" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#worldclim-data-loading-efficiently"><i class="fa fa-check"></i><b>3.5.3</b> WorldClim data loading efficiently</a></li>
<li class="chapter" data-level="3.5.4" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#location-data-from-a-raster"><i class="fa fa-check"></i><b>3.5.4</b> Location data from a raster</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#part-2-descriptive-statistics"><i class="fa fa-check"></i><b>3.6</b> Part 2 descriptive statistics</a><ul>
<li class="chapter" data-level="3.6.1" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#data-preparation"><i class="fa fa-check"></i><b>3.6.1</b> Data preparation</a></li>
<li class="chapter" data-level="3.6.2" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#histogram"><i class="fa fa-check"></i><b>3.6.2</b> Histogram</a></li>
<li class="chapter" data-level="3.6.3" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#using-more-data"><i class="fa fa-check"></i><b>3.6.3</b> Using more data</a></li>
<li class="chapter" data-level="3.6.4" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#histogram-with-ggplot"><i class="fa fa-check"></i><b>3.6.4</b> Histogram with ggplot</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#part-3-interpolation"><i class="fa fa-check"></i><b>3.7</b> Part 3 interpolation</a></li>
<li class="chapter" data-level="3.8" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#auto-data-download"><i class="fa fa-check"></i><b>3.8</b> Auto data download</a></li>
<li class="chapter" data-level="3.9" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#advanced-analysis"><i class="fa fa-check"></i><b>3.9</b> Advanced analysis</a></li>
<li class="chapter" data-level="3.10" data-path="rasters-descriptive-statistics-and-interpolation.html"><a href="rasters-descriptive-statistics-and-interpolation.html#feedback-2"><i class="fa fa-check"></i><b>3.10</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html"><i class="fa fa-check"></i><b>4</b> Git, GitHub and RMarkdown</a><ul>
<li class="chapter" data-level="4.1" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#learning-outcomes-3"><i class="fa fa-check"></i><b>4.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="4.2" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#homework-3"><i class="fa fa-check"></i><b>4.2</b> Homework</a></li>
<li class="chapter" data-level="4.3" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#recommended-listening-3"><i class="fa fa-check"></i><b>4.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="4.4" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#introduction-3"><i class="fa fa-check"></i><b>4.4</b> Introduction</a></li>
<li class="chapter" data-level="4.5" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#git-and-github"><i class="fa fa-check"></i><b>4.5</b> Git and GitHub</a><ul>
<li class="chapter" data-level="4.5.1" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#the-three-ways"><i class="fa fa-check"></i><b>4.5.1</b> The three ways</a></li>
<li class="chapter" data-level="4.5.2" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#set-up-your-github"><i class="fa fa-check"></i><b>4.5.2</b> Set up your GitHub</a></li>
<li class="chapter" data-level="4.5.3" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#using-rstudio-with-git"><i class="fa fa-check"></i><b>4.5.3</b> Using RStudio with Git</a></li>
<li class="chapter" data-level="4.5.4" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#using-the-git-gui---way-1"><i class="fa fa-check"></i><b>4.5.4</b> Using the Git GUI - way 1</a></li>
<li class="chapter" data-level="4.5.5" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#create-a-new-version-control-in-rstudio---way-2"><i class="fa fa-check"></i><b>4.5.5</b> Create a new version control in RStudio - way 2</a></li>
<li class="chapter" data-level="4.5.6" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#if-have-have-an-existing-project---way-3"><i class="fa fa-check"></i><b>4.5.6</b> If have have an existing project - way 3</a></li>
<li class="chapter" data-level="4.5.7" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#commiting-to-git"><i class="fa fa-check"></i><b>4.5.7</b> Commiting to Git</a></li>
<li class="chapter" data-level="4.5.8" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#using-git-outside-rstudio"><i class="fa fa-check"></i><b>4.5.8</b> Using Git outside RStudio</a></li>
<li class="chapter" data-level="4.5.9" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#push-to-github"><i class="fa fa-check"></i><b>4.5.9</b> Push to Github</a></li>
<li class="chapter" data-level="4.5.10" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#pull-from-github"><i class="fa fa-check"></i><b>4.5.10</b> Pull from GitHub</a></li>
<li class="chapter" data-level="4.5.11" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#troubleshooting"><i class="fa fa-check"></i><b>4.5.11</b> Troubleshooting</a></li>
<li class="chapter" data-level="4.5.12" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#fork-a-repository"><i class="fa fa-check"></i><b>4.5.12</b> Fork a repository</a></li>
<li class="chapter" data-level="4.5.13" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#branches"><i class="fa fa-check"></i><b>4.5.13</b> Branches</a></li>
<li class="chapter" data-level="4.5.14" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#back-in-time"><i class="fa fa-check"></i><b>4.5.14</b> Back in time</a></li>
<li class="chapter" data-level="4.5.15" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#health-warning-1"><i class="fa fa-check"></i><b>4.5.15</b> Health warning</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#rmarkdown"><i class="fa fa-check"></i><b>4.6</b> RMarkdown</a><ul>
<li class="chapter" data-level="4.6.1" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#html"><i class="fa fa-check"></i><b>4.6.1</b> HTML</a></li>
<li class="chapter" data-level="4.6.2" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#flexdashboard"><i class="fa fa-check"></i><b>4.6.2</b> Flexdashboard</a></li>
<li class="chapter" data-level="4.6.3" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#word-document"><i class="fa fa-check"></i><b>4.6.3</b> Word document</a></li>
<li class="chapter" data-level="4.6.4" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#knit-options"><i class="fa fa-check"></i><b>4.6.4</b> Knit options</a></li>
<li class="chapter" data-level="4.6.5" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#shortcuts"><i class="fa fa-check"></i><b>4.6.5</b> Shortcuts</a></li>
<li class="chapter" data-level="4.6.6" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#adding-references"><i class="fa fa-check"></i><b>4.6.6</b> Adding references</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#binder"><i class="fa fa-check"></i><b>4.7</b> Binder</a></li>
<li class="chapter" data-level="4.8" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#further-reading"><i class="fa fa-check"></i><b>4.8</b> Further reading</a></li>
<li class="chapter" data-level="4.9" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#feedback-3"><i class="fa fa-check"></i><b>4.9</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="map-making.html"><a href="map-making.html"><i class="fa fa-check"></i><b>5</b> Map making</a><ul>
<li class="chapter" data-level="5.1" data-path="map-making.html"><a href="map-making.html#learning-outcomes-4"><i class="fa fa-check"></i><b>5.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="5.2" data-path="map-making.html"><a href="map-making.html#homework-4"><i class="fa fa-check"></i><b>5.2</b> Homework</a></li>
<li class="chapter" data-level="5.3" data-path="map-making.html"><a href="map-making.html#recommended-listening-4"><i class="fa fa-check"></i><b>5.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="5.4" data-path="map-making.html"><a href="map-making.html#introduction-4"><i class="fa fa-check"></i><b>5.4</b> Introduction</a><ul>
<li class="chapter" data-level="5.4.1" data-path="map-making.html"><a href="map-making.html#osm-1"><i class="fa fa-check"></i><b>5.4.1</b> OSM</a></li>
<li class="chapter" data-level="5.4.2" data-path="map-making.html"><a href="map-making.html#airbnb"><i class="fa fa-check"></i><b>5.4.2</b> Airbnb</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="map-making.html"><a href="map-making.html#data-1"><i class="fa fa-check"></i><b>5.5</b> Data</a><ul>
<li class="chapter" data-level="5.5.1" data-path="map-making.html"><a href="map-making.html#osm-2"><i class="fa fa-check"></i><b>5.5.1</b> OSM</a></li>
<li class="chapter" data-level="5.5.2" data-path="map-making.html"><a href="map-making.html#london-boroughs"><i class="fa fa-check"></i><b>5.5.2</b> London boroughs</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="map-making.html"><a href="map-making.html#qgis-2"><i class="fa fa-check"></i><b>5.6</b> QGIS</a><ul>
<li class="chapter" data-level="5.6.1" data-path="map-making.html"><a href="map-making.html#load-data-2"><i class="fa fa-check"></i><b>5.6.1</b> Load data</a></li>
<li class="chapter" data-level="5.6.2" data-path="map-making.html"><a href="map-making.html#manipulate-data"><i class="fa fa-check"></i><b>5.6.2</b> Manipulate data</a></li>
<li class="chapter" data-level="5.6.3" data-path="map-making.html"><a href="map-making.html#map-data"><i class="fa fa-check"></i><b>5.6.3</b> Map data</a></li>
<li class="chapter" data-level="5.6.4" data-path="map-making.html"><a href="map-making.html#export-map"><i class="fa fa-check"></i><b>5.6.4</b> Export map</a></li>
<li class="chapter" data-level="5.6.5" data-path="map-making.html"><a href="map-making.html#graphical-modeler"><i class="fa fa-check"></i><b>5.6.5</b> Graphical modeler</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="map-making.html"><a href="map-making.html#r-2"><i class="fa fa-check"></i><b>5.7</b> R</a><ul>
<li class="chapter" data-level="5.7.1" data-path="map-making.html"><a href="map-making.html#static-map"><i class="fa fa-check"></i><b>5.7.1</b> Static map</a></li>
<li class="chapter" data-level="5.7.2" data-path="map-making.html"><a href="map-making.html#export"><i class="fa fa-check"></i><b>5.7.2</b> Export</a></li>
<li class="chapter" data-level="5.7.3" data-path="map-making.html"><a href="map-making.html#basic-interactive-map"><i class="fa fa-check"></i><b>5.7.3</b> Basic interactive map</a></li>
<li class="chapter" data-level="5.7.4" data-path="map-making.html"><a href="map-making.html#advanced-interactive-map"><i class="fa fa-check"></i><b>5.7.4</b> Advanced interactive map</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="map-making.html"><a href="map-making.html#bad-maps"><i class="fa fa-check"></i><b>5.8</b> Bad maps</a></li>
<li class="chapter" data-level="5.9" data-path="map-making.html"><a href="map-making.html#feedback-4"><i class="fa fa-check"></i><b>5.9</b> Feedback</a></li>
</ul></li>
<li class="part"><span><b>II GIS analysis</b></span></li>
<li class="chapter" data-level="6" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html"><i class="fa fa-check"></i><b>6</b> Analysing spatial patterns</a><ul>
<li class="chapter" data-level="6.1" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#learning-outcomes-5"><i class="fa fa-check"></i><b>6.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="6.2" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#homework-5"><i class="fa fa-check"></i><b>6.2</b> Homework</a></li>
<li class="chapter" data-level="6.3" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#recommended-listening-5"><i class="fa fa-check"></i><b>6.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="6.4" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#introduction-5"><i class="fa fa-check"></i><b>6.4</b> Introduction</a></li>
<li class="chapter" data-level="6.5" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#setting-up-your-data"><i class="fa fa-check"></i><b>6.5</b> Setting up your data</a><ul>
<li class="chapter" data-level="6.5.1" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#data-cleaning"><i class="fa fa-check"></i><b>6.5.1</b> Data cleaning</a></li>
<li class="chapter" data-level="6.5.2" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#study-area"><i class="fa fa-check"></i><b>6.5.2</b> Study area</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#point-pattern-analysis"><i class="fa fa-check"></i><b>6.6</b> Point pattern analysis</a><ul>
<li class="chapter" data-level="6.6.1" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#kernel-density-estimation"><i class="fa fa-check"></i><b>6.6.1</b> Kernel Density Estimation</a></li>
<li class="chapter" data-level="6.6.2" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#quadrat-analysis"><i class="fa fa-check"></i><b>6.6.2</b> Quadrat Analysis</a></li>
<li class="chapter" data-level="6.6.3" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#try-experimenting"><i class="fa fa-check"></i><b>6.6.3</b> Try experimenting…</a></li>
<li class="chapter" data-level="6.6.4" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#ripleys-k"><i class="fa fa-check"></i><b>6.6.4</b> Ripley’s K</a></li>
<li class="chapter" data-level="6.6.5" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#alternatives-to-ripleys-k"><i class="fa fa-check"></i><b>6.6.5</b> Alternatives to Ripley’s K</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#density-based-spatial-clustering-of-applications-with-noise-dbscan"><i class="fa fa-check"></i><b>6.7</b> Density-based spatial clustering of applications with noise: DBSCAN</a></li>
<li class="chapter" data-level="6.8" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#point-pattern-analysis-summary"><i class="fa fa-check"></i><b>6.8</b> Point pattern analysis summary</a></li>
<li class="chapter" data-level="6.9" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#analysing-spatial-autocorrelation-with-morans-i-lisa-and-friends"><i class="fa fa-check"></i><b>6.9</b> Analysing Spatial Autocorrelation with Moran’s I, LISA and friends</a><ul>
<li class="chapter" data-level="6.9.1" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#data-download-1"><i class="fa fa-check"></i><b>6.9.1</b> Data download</a></li>
<li class="chapter" data-level="6.9.2" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#data-cleaning-1"><i class="fa fa-check"></i><b>6.9.2</b> Data cleaning</a></li>
<li class="chapter" data-level="6.9.3" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#data-manipulation"><i class="fa fa-check"></i><b>6.9.3</b> Data manipulation</a></li>
<li class="chapter" data-level="6.9.4" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#spatial-autocorrelation"><i class="fa fa-check"></i><b>6.9.4</b> Spatial autocorrelation</a></li>
<li class="chapter" data-level="6.9.5" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#mapping-outputs"><i class="fa fa-check"></i><b>6.9.5</b> Mapping outputs</a></li>
<li class="chapter" data-level="6.9.6" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#other-variables"><i class="fa fa-check"></i><b>6.9.6</b> Other variables</a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#extension"><i class="fa fa-check"></i><b>6.10</b> Extension</a></li>
<li class="chapter" data-level="6.11" data-path="analysing-spatial-patterns.html"><a href="analysing-spatial-patterns.html#feedback-5"><i class="fa fa-check"></i><b>6.11</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html"><i class="fa fa-check"></i><b>7</b> Advanced raster analysis</a><ul>
<li class="chapter" data-level="7.1" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#learning-objectives"><i class="fa fa-check"></i><b>7.1</b> Learning objectives</a></li>
<li class="chapter" data-level="7.2" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#homework-6"><i class="fa fa-check"></i><b>7.2</b> Homework</a></li>
<li class="chapter" data-level="7.3" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#recommended-listening-6"><i class="fa fa-check"></i><b>7.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="7.4" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#introduction-6"><i class="fa fa-check"></i><b>7.4</b> Introduction</a></li>
<li class="chapter" data-level="7.5" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#gitignore"><i class="fa fa-check"></i><b>7.5</b> .gitignore</a><ul>
<li class="chapter" data-level="7.5.1" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#remote-sensing-background-required"><i class="fa fa-check"></i><b>7.5.1</b> Remote sensing background (required)</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#data-2"><i class="fa fa-check"></i><b>7.6</b> Data</a><ul>
<li class="chapter" data-level="7.6.1" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#shapefile"><i class="fa fa-check"></i><b>7.6.1</b> Shapefile</a></li>
<li class="chapter" data-level="7.6.2" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#raster-data-landsat"><i class="fa fa-check"></i><b>7.6.2</b> Raster data (Landsat)</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#processing-raster-data"><i class="fa fa-check"></i><b>7.7</b> Processing raster data</a><ul>
<li class="chapter" data-level="7.7.1" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#loading"><i class="fa fa-check"></i><b>7.7.1</b> Loading</a></li>
<li class="chapter" data-level="7.7.2" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#resampling"><i class="fa fa-check"></i><b>7.7.2</b> Resampling</a></li>
<li class="chapter" data-level="7.7.3" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#clipping"><i class="fa fa-check"></i><b>7.7.3</b> Clipping</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#data-exploration"><i class="fa fa-check"></i><b>7.8</b> Data exploration</a><ul>
<li class="chapter" data-level="7.8.1" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#more-loading-and-manipulating"><i class="fa fa-check"></i><b>7.8.1</b> More loading and manipulating</a></li>
<li class="chapter" data-level="7.8.2" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#plotting-data"><i class="fa fa-check"></i><b>7.8.2</b> Plotting data</a></li>
<li class="chapter" data-level="7.8.3" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#data-similarity"><i class="fa fa-check"></i><b>7.8.3</b> Data similarity</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#basic-raster-calculations"><i class="fa fa-check"></i><b>7.9</b> Basic raster calculations</a><ul>
<li class="chapter" data-level="7.9.1" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#ndvi"><i class="fa fa-check"></i><b>7.9.1</b> NDVI</a></li>
<li class="chapter" data-level="7.9.2" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#ndvi-function"><i class="fa fa-check"></i><b>7.9.2</b> NDVI function</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#advanced-raster-calculations"><i class="fa fa-check"></i><b>7.10</b> Advanced raster calculations</a><ul>
<li class="chapter" data-level="7.10.1" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#calucating-tempearture-from-landsat-data"><i class="fa fa-check"></i><b>7.10.1</b> Calucating tempearture from Landsat data</a></li>
</ul></li>
<li class="chapter" data-level="7.11" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#calucating-urban-area-from-landsat-data"><i class="fa fa-check"></i><b>7.11</b> Calucating urban area from Landsat data</a></li>
<li class="chapter" data-level="7.12" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#urban-area-and-temperature-relationship"><i class="fa fa-check"></i><b>7.12</b> Urban area and temperature relationship</a></li>
<li class="chapter" data-level="7.13" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#statistical-summary"><i class="fa fa-check"></i><b>7.13</b> Statistical summary</a></li>
<li class="chapter" data-level="7.14" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#considerations"><i class="fa fa-check"></i><b>7.14</b> Considerations</a></li>
<li class="chapter" data-level="7.15" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#extension-1"><i class="fa fa-check"></i><b>7.15</b> Extension</a></li>
<li class="chapter" data-level="7.16" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#references"><i class="fa fa-check"></i><b>7.16</b> References</a></li>
<li class="chapter" data-level="7.17" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#remote-sensing-background-optional"><i class="fa fa-check"></i><b>7.17</b> Remote sensing background (optional)</a></li>
<li class="chapter" data-level="7.18" data-path="advanced-raster-analysis.html"><a href="advanced-raster-analysis.html#feedback-6"><i class="fa fa-check"></i><b>7.18</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html"><i class="fa fa-check"></i><b>8</b> Online mapping / descriptive statistics</a><ul>
<li class="chapter" data-level="8.1" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#homework-7"><i class="fa fa-check"></i><b>8.1</b> Homework</a></li>
<li class="chapter" data-level="8.2" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#recommended-listening-7"><i class="fa fa-check"></i><b>8.2</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="8.3" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#part-a-spatial-descriptive-statistics"><i class="fa fa-check"></i><b>8.3</b> Part A spatial descriptive statistics</a><ul>
<li class="chapter" data-level="8.3.1" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#learning-objectives-1"><i class="fa fa-check"></i><b>8.3.1</b> Learning objectives</a></li>
<li class="chapter" data-level="8.3.2" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#getting-started-2"><i class="fa fa-check"></i><b>8.3.2</b> Getting Started</a></li>
<li class="chapter" data-level="8.3.3" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#main-tasks"><i class="fa fa-check"></i><b>8.3.3</b> Main Tasks</a></li>
<li class="chapter" data-level="8.3.4" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#task-1---descriptive-statistics"><i class="fa fa-check"></i><b>8.3.4</b> Task 1 - Descriptive Statistics</a></li>
<li class="chapter" data-level="8.3.5" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#extension-1-1"><i class="fa fa-check"></i><b>8.3.5</b> Extension 1</a></li>
<li class="chapter" data-level="8.3.6" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#task-2---function-to-recode-data"><i class="fa fa-check"></i><b>8.3.6</b> Task 2 - Function to recode data</a></li>
<li class="chapter" data-level="8.3.7" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#whats-going-on-in-this-function"><i class="fa fa-check"></i><b>8.3.7</b> What’s going on in this function?</a></li>
<li class="chapter" data-level="8.3.8" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#task-3-mapping-location-quotients"><i class="fa fa-check"></i><b>8.3.8</b> Task 3 – Mapping Location Quotients</a></li>
<li class="chapter" data-level="8.3.9" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#task-4-creating-a-basic-geodemographic-classification"><i class="fa fa-check"></i><b>8.3.9</b> Task 4 – Creating a Basic Geodemographic Classification</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#part-b-online-mapping"><i class="fa fa-check"></i><b>8.4</b> Part B Online mapping</a><ul>
<li class="chapter" data-level="8.4.1" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#learning-objectives-2"><i class="fa fa-check"></i><b>8.4.1</b> Learning objectives</a></li>
<li class="chapter" data-level="8.4.2" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#introduction-7"><i class="fa fa-check"></i><b>8.4.2</b> Introduction</a></li>
<li class="chapter" data-level="8.4.3" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#rpubs"><i class="fa fa-check"></i><b>8.4.3</b> RPubs</a></li>
<li class="chapter" data-level="8.4.4" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#rmarkdown-site-generator"><i class="fa fa-check"></i><b>8.4.4</b> RMarkdown site generator</a></li>
<li class="chapter" data-level="8.4.5" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#warning"><i class="fa fa-check"></i><b>8.4.5</b> Warning</a></li>
<li class="chapter" data-level="8.4.6" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#advanced-online-publishing"><i class="fa fa-check"></i><b>8.4.6</b> Advanced online publishing</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="online-mapping-descriptive-statistics.html"><a href="online-mapping-descriptive-statistics.html#feedback-7"><i class="fa fa-check"></i><b>8.5</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html"><i class="fa fa-check"></i><b>9</b> GWR and spatially lagged regression</a><ul>
<li class="chapter" data-level="9.1" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#learning-objectives-3"><i class="fa fa-check"></i><b>9.1</b> Learning objectives</a></li>
<li class="chapter" data-level="9.2" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#homework-8"><i class="fa fa-check"></i><b>9.2</b> Homework</a></li>
<li class="chapter" data-level="9.3" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#recommended-listening-8"><i class="fa fa-check"></i><b>9.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="9.4" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#introduction-8"><i class="fa fa-check"></i><b>9.4</b> Introduction</a><ul>
<li class="chapter" data-level="9.4.1" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#setting-up-your-data-1"><i class="fa fa-check"></i><b>9.4.1</b> Setting up your Data</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#analysing-gcse-exam-performance---testing-a-research-hypothesis"><i class="fa fa-check"></i><b>9.5</b> Analysing GCSE exam performance - testing a research hypothesis</a><ul>
<li class="chapter" data-level="9.5.1" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#research-question-and-hypothesis"><i class="fa fa-check"></i><b>9.5.1</b> Research Question and Hypothesis</a></li>
<li class="chapter" data-level="9.5.2" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#regression-basics"><i class="fa fa-check"></i><b>9.5.2</b> Regression Basics</a></li>
<li class="chapter" data-level="9.5.3" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#running-a-regression-model-in-r"><i class="fa fa-check"></i><b>9.5.3</b> Running a Regression Model in R</a></li>
<li class="chapter" data-level="9.5.4" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#bootstrap-resampling"><i class="fa fa-check"></i><b>9.5.4</b> Bootstrap resampling</a></li>
<li class="chapter" data-level="9.5.5" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#assumptions-underpinning-linear-regression"><i class="fa fa-check"></i><b>9.5.5</b> Assumptions Underpinning Linear Regression</a></li>
<li class="chapter" data-level="9.5.6" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#assumption-1---there-is-a-linear-relationship-between-the-dependent-and-independent-variables"><i class="fa fa-check"></i><b>9.5.6</b> Assumption 1 - There is a linear relationship between the dependent and independent variables</a></li>
<li class="chapter" data-level="9.5.7" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#assumption-2---the-residuals-in-your-model-should-be-normally-distributed"><i class="fa fa-check"></i><b>9.5.7</b> Assumption 2 - The residuals in your model should be normally distributed</a></li>
<li class="chapter" data-level="9.5.8" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#assumption-3---no-multicolinearity-in-the-independent-variables"><i class="fa fa-check"></i><b>9.5.8</b> Assumption 3 - No Multicolinearity in the independent variables</a></li>
<li class="chapter" data-level="9.5.9" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#assumption-4---homoscedasticity"><i class="fa fa-check"></i><b>9.5.9</b> Assumption 4 - Homoscedasticity</a></li>
<li class="chapter" data-level="9.5.10" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#assumption-5---independence-of-errors"><i class="fa fa-check"></i><b>9.5.10</b> Assumption 5 - Independence of Errors</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#spatial-regression-models"><i class="fa fa-check"></i><b>9.6</b> Spatial Regression Models</a><ul>
<li class="chapter" data-level="9.6.1" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#dealing-with-spatially-autocorrelated-residuals---spatial-lag-and-spatial-error-models"><i class="fa fa-check"></i><b>9.6.1</b> Dealing with Spatially Autocorrelated Residuals - Spatial Lag and Spatial Error models</a></li>
<li class="chapter" data-level="9.6.2" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#spatial-regression-model-in-r"><i class="fa fa-check"></i><b>9.6.2</b> Spatial regression model in R</a></li>
<li class="chapter" data-level="9.6.3" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#extending-your-regression-model---dummy-variables"><i class="fa fa-check"></i><b>9.6.3</b> Extending your regression model - Dummy Variables</a></li>
<li class="chapter" data-level="9.6.4" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#task-investigating-further---adding-more-explanatory-variables-into-a-multiple-regression-model"><i class="fa fa-check"></i><b>9.6.4</b> TASK: Investigating Further - Adding More Explanatory Variables into a multiple regression model</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#task-3---spatial-non-stationarity-and-geographically-weighted-regression-models-gwr"><i class="fa fa-check"></i><b>9.7</b> Task 3 - Spatial Non-stationarity and Geographically Weighted Regression Models (GWR)</a></li>
<li class="chapter" data-level="9.8" data-path="gwr-and-spatially-lagged-regression.html"><a href="gwr-and-spatially-lagged-regression.html#feedback-8"><i class="fa fa-check"></i><b>9.8</b> Feedback</a></li>
</ul></li>
<li class="part"><span><b>Assignment</b></span></li>
<li class="chapter" data-level="10" data-path="assignment-requirements.html"><a href="assignment-requirements.html"><i class="fa fa-check"></i><b>10</b> Assignment requirements</a><ul>
<li class="chapter" data-level="10.1" data-path="assignment-requirements.html"><a href="assignment-requirements.html#requirements"><i class="fa fa-check"></i><b>10.1</b> Requirements</a></li>
<li class="chapter" data-level="10.2" data-path="assignment-requirements.html"><a href="assignment-requirements.html#marking-scheme"><i class="fa fa-check"></i><b>10.2</b> Marking scheme</a></li>
<li class="chapter" data-level="10.3" data-path="assignment-requirements.html"><a href="assignment-requirements.html#expected-timeline"><i class="fa fa-check"></i><b>10.3</b> Expected timeline</a></li>
<li class="chapter" data-level="10.4" data-path="assignment-requirements.html"><a href="assignment-requirements.html#penalities"><i class="fa fa-check"></i><b>10.4</b> Penalities</a></li>
<li class="chapter" data-level="10.5" data-path="assignment-requirements.html"><a href="assignment-requirements.html#frequently-asked-questions"><i class="fa fa-check"></i><b>10.5</b> Frequently Asked Questions</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html"><i class="fa fa-check"></i><b>11</b> Assignment resources</a><ul>
<li class="chapter" data-level="11.1" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#timeline"><i class="fa fa-check"></i><b>11.1</b> Timeline</a></li>
<li class="chapter" data-level="11.2" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#markscheme"><i class="fa fa-check"></i><b>11.2</b> Markscheme</a></li>
<li class="chapter" data-level="11.3" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#examples-of-previous-work"><i class="fa fa-check"></i><b>11.3</b> Examples of previous work</a></li>
<li class="chapter" data-level="11.4" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#events-meet-other-spatial-data-professionals"><i class="fa fa-check"></i><b>11.4</b> Events / meet other spatial data professionals</a></li>
<li class="chapter" data-level="11.5" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#cool-stuff-to-explore"><i class="fa fa-check"></i><b>11.5</b> Cool stuff to explore</a></li>
<li class="chapter" data-level="11.6" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#booksreading-resources"><i class="fa fa-check"></i><b>11.6</b> Books/reading resources</a></li>
<li class="chapter" data-level="11.7" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#new-developments"><i class="fa fa-check"></i><b>11.7</b> New developments</a><ul>
<li class="chapter" data-level="11.7.1" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#twitter"><i class="fa fa-check"></i><b>11.7.1</b> Twitter</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#data-3"><i class="fa fa-check"></i><b>11.8</b> Data</a></li>
<li class="chapter" data-level="11.9" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#data-lists-1"><i class="fa fa-check"></i><b>11.9</b> Data lists</a></li>
<li class="chapter" data-level="11.10" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#reading-and-writing-critically"><i class="fa fa-check"></i><b>11.10</b> Reading and writing critically</a></li>
<li class="chapter" data-level="11.11" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#free-flow-diagram-tools"><i class="fa fa-check"></i><b>11.11</b> Free flow diagram tools</a></li>
<li class="chapter" data-level="11.12" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#basics-1"><i class="fa fa-check"></i><b>11.12</b> Basics</a><ul>
<li class="chapter" data-level="11.12.1" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#introduction-9"><i class="fa fa-check"></i><b>11.12.1</b> Introduction</a></li>
<li class="chapter" data-level="11.12.2" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#literature-review"><i class="fa fa-check"></i><b>11.12.2</b> Literature review</a></li>
<li class="chapter" data-level="11.12.3" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#methodology"><i class="fa fa-check"></i><b>11.12.3</b> Methodology</a></li>
<li class="chapter" data-level="11.12.4" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#results"><i class="fa fa-check"></i><b>11.12.4</b> Results</a></li>
<li class="chapter" data-level="11.12.5" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#discussion"><i class="fa fa-check"></i><b>11.12.5</b> Discussion</a></li>
<li class="chapter" data-level="11.12.6" data-path="assignment-resources-1.html"><a href="assignment-resources-1.html#conclusion"><i class="fa fa-check"></i><b>11.12.6</b> Conclusion</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><center>
  <a rel="license" href="./external-usage.html#license">
    License: CC-BY-SA<br>
    <i class = "fab fa-creative-commons fa-2x"></i>
    <i class = "fab fa-creative-commons-by fa-2x"></i>
    <i class = "fab fa-creative-commons-sa fa-2x"></i>
  </a>
</li></center>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CASA0005 Geographic Information Systems and Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-r" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Introduction to R</h1>
<div id="learning-outcomes-1" class="section level2">
<h2><span class="header-section-number">2.1</span> Learning outcomes</h2>
<p>By the end of this practical you should be able to:</p>
<ol style="list-style-type: decimal">
<li>Execute basic processing in R</li>
<li>Examine, clean and manipulate comma seperate value (<code>.csv</code>) data</li>
<li>Examine, clean and manipulate and plot spatial (<code>.shp</code>) data</li>
<li>Produce interactive maps</li>
<li>Evaluate the benefits of different data manipulation and mapping techniques</li>
</ol>
</div>
<div id="homework-1" class="section level2">
<h2><span class="header-section-number">2.2</span> Homework</h2>
<p>Outside of our schedulded sessions you should be doing around 12 hours of extra study per week. Feel free to follow your own GIS interests, but good places to start include the following:</p>
<div class="infobox assignment">
<p><strong>Assignment</strong></p>
<p>This week you need to assess the validity of your topic in terms of data suitability, then sketch out an introduction and literature review including academic and policy documents (or any
reputable source).</p>
</div>
<div class="infobox note">
<p><strong>Reading</strong></p>
<p>This week:</p>
<ul>
<li><a href="https://geocompr.robinlovelace.net/spatial-class.html">Chapter 2 “Geographic data in R”</a> from Geocomputation with R by Lovelace, Nowosad and Muenchow (2020).</li>
</ul>
<p><strong>Watching</strong></p>
<ul>
<li><a href="https://www.youtube.com/watch?v=9YTNYT1maa4">Hadley Wickham’s Keynote from the European Molecular Biology Laboratory (EMBL)</a>. This will be the same for a few weeks.</li>
</ul>
<p>Remember this is just a starting point, explore the <a href="https://rl.talis.com/3/ucl/lists/139FBAF8-DACD-60FB-8BDC-E9C9E09BA885.html?lang=en-GB&amp;login=1">reading list</a>, practical and lecture for more ideas.</p>
</div>
</div>
<div id="recommended-listening-1" class="section level2">
<h2><span class="header-section-number">2.3</span> Recommended listening 🎧</h2>
<p>Some of these practicals are long, take regular breaks and have a listen to some of our fav tunes each week.</p>
<p><a href="https://www.youtube.com/watch?v=A48hOToMuRE">Andy</a></p>
<p><a href="https://open.spotify.com/album/0m9oaRdpRS9n0mq2bECgNQ?si=Dxu8_-kmSy6jq_oFN5gJ4A">Adam</a>. Recommended listening this week comes courtesy of “Pound for pound the best rock band on the planet at the minute. In my, not so humble opinion.” – Jake Burns, Stiff Little Fingers. Yes, it’s the Wildhearts and I can confirm that they are the greatest rock band on the planet! Wrap your ears around this:</p>
</div>
<div id="introduction-1" class="section level2">
<h2><span class="header-section-number">2.4</span> Introduction</h2>
<p>This practical is <strong>LONG</strong> but it will take you from not knowing much about R to making freaking cool interactive maps in one practical. As you can imagine, this will be a steep learning curve.</p>
<p>I will give you all the code you need, it’s your job to read through the text very carefully and try to understand what bits of code are doing as you go.</p>
<p>There will be bits of code you don’t fully understand. Don’t worry, the key is to revisit later and try to work out what is going on then. Learning R is a long and iterative process and this is just the start…</p>
<p>If you want to learn more about R and indeed download the latest version for your own use, then visit the <a href="http://www.r-project.org/">R project pages</a></p>
<p>The Wikipedia page for those who want to know a little of the history of R can be found <a href="http://en.wikipedia.org/wiki/R_(programming_language)">here</a></p>
<p>There is an almost endless supply of good R tutorials on the web. If you get stuck or want to learn even more R (and why would you not want to?!), I’d recommend trying some of the following R Tutorial websites:</p>
<ul>
<li><p><a href="http://www.statmethods.net/index.html" class="uri">http://www.statmethods.net/index.html</a></p></li>
<li><p><a href="http://www.r-tutor.com/" class="uri">http://www.r-tutor.com/</a></p></li>
<li><p><a href="http://www.cyclismo.org/tutorial/R/index.html" class="uri">http://www.cyclismo.org/tutorial/R/index.html</a></p></li>
<li><p><a href="http://www.cookbook-r.com/" class="uri">http://www.cookbook-r.com/</a></p></li>
</ul>
<p>If you want to really be up to date with the state of the art in R, then <a href="https://bookdown.org/">bookdown</a> is a fantastic resource. It features <strong>free</strong> books by some of the pre-eminent names in the R scene — I would urge you to go and take a look.</p>
<div id="online-forums-are-your-friend" class="section level3">
<h3><span class="header-section-number">2.4.1</span> Online forums are your friend!!</h3>
<p>With almost every problem you encounter with R, someone else will have had the same problem before you and posted it on a forum –– someone will then post a solution below.</p>
<p>My usual route is to Google the problem and I’ll then be directed to a post, usually on Stack Overflow, Stack Exchange or Cross Validated. When doing so try to think about the minimal working (or not working) example (MWE), by this i mean remove anything very specific to your problem. I’ve rarely not found a solution to a problem this way.</p>
</div>
<div id="health-warning" class="section level3">
<h3><span class="header-section-number">2.4.2</span> Health warning</h3>
<p>Beware of posting questions on these forums yourself – contributors to these forums (especially the R ones!), whilst almost always extremely knowledgeable about R, have a bit of a reputation for being insert familiar pejorative term for less-than-polite-human-being here! As you might expect, people who have enough time to become total experts in R, have little time to work on their social skills!! Fortunately though, some other poor chump has usually taken that hit for you and you can still find a useful answer to your problem.</p>
<p>If you are specifically more interested in the spatial side of R, then Alex Singleton and Chris Brunsdon at the Universities of Liverpool and Maynooth also have a number of very useful R Spatial Tutorials – <a href="http://rpubs.com/alexsingleton/" class="uri">http://rpubs.com/alexsingleton/</a> &amp; <a href="http://rpubs.com/chrisbrunsdon/" class="uri">http://rpubs.com/chrisbrunsdon/</a></p>
<p>Robin Lovelace in Leeds is also frequently at the bleeding edge of developments in R spatial stuff, so keep an eye on his <a href="http://robinlovelace.net/">website</a>. Robin has also made a book on GeoComputation in R, which you should definitely read! — <a href="https://geocompr.robinlovelace.net/" class="uri">https://geocompr.robinlovelace.net/</a></p>
<p>These websites are also very very good: <a href="https://pakillo.github.io/R-GIS-tutorial/" class="uri">https://pakillo.github.io/R-GIS-tutorial/</a> and <a href="http://www.maths.lancs.ac.uk/~rowlings/Teaching/UseR2012/cheatsheet.html" class="uri">http://www.maths.lancs.ac.uk/~rowlings/Teaching/UseR2012/cheatsheet.html</a></p>
</div>
<div id="r-and-rstudio" class="section level3">
<h3><span class="header-section-number">2.4.3</span> R and RStudio</h3>
<p>When you download and install R, you get the R Graphical User Interface (GUI) as standard (below). This is fine and some purists prefer using the clean, unfussy command-line original, but it has some limitations such as no graphical way to view data tables or keep track of what is in your working directory (there are a number of others too).</p>
<p><img src="prac2_images/R.png" width="500px" style="display: block; margin: auto;" /></p>
<p>Fortunately there are a number of software environments that have been developed for R to make it a little more user-friendly; the best of these by a long way is RStudio. RStudio can be downloaded for free from <a href="https://www.rstudio.com/" class="uri">https://www.rstudio.com/</a>. We covered the RStudio layout last week.</p>
</div>
<div id="getting-started-1" class="section level3">
<h3><span class="header-section-number">2.4.4</span> Getting started</h3>
<p>If you are some kind of masochist, you are welcome to use the bundled R GUI for all of your work. If pain is not your thing, then for this practical (and future practicals) I will assume that you are using RStudio.</p>
<ol style="list-style-type: decimal">
<li>From the start menu on your computer, find and run RStudio</li>
</ol>
<p>Once RStudio has opened, the first thing we will do is create a new project – projects enable you to organise your work effectively and store all of the files you create and work with for a particular task.</p>
<ol style="list-style-type: decimal">
<li><p>To create a new project (and this will vary a little depending on the version of RStudio you are using) select File &gt; New Project</p></li>
<li><p>Select Start a project in a brand new working directory and create a new project in a directory of a new ‘wk2’ directory on your N: drive:</p></li>
</ol>
<p><img src="prac2_images/r_newproject.png" width="500px" style="display: block; margin: auto;" /></p>
<p>My file directory (the second box here) will be different to yours as this is my teaching resources folder. Keep yours simple <code>N:/GIS/wk2</code>.</p>
<p>Setting up a project is extremely useful as it lets you easily access your data and files…for example….the flytipping <code>.csv</code> we used last week is stored at the file path</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1">mycsv &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;C:/Teaching/CASA0005repo/Prac1_data/fly_tipping_borough_edit.csv&quot;</span>)  </a></code></pre></div>
<p>However as i’ve set my R project up in the CASA0005repo folder with different data folders for each week i can just use:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1">mycsv &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;Prac1_data/fly_tipping_borough_edit.csv&quot;</span>)  </a></code></pre></div>
<p>If i had the <code>.csv</code> file in the same folder as my project i could just use</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1">mycsv &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;fly_tipping_borough_edit.csv&quot;</span>)  </a></code></pre></div>
<p>You can run this in the Console area now or within a script which we will now go over…</p>
<p>I’d strongly recommend you think about how you will store data within your project. Is it sensible to just dump all your data into the project folder or perahps create a new folder (either in R) or how you would normally do so in Windows / OS X and keep your raw data in that folder…like i have done…Here you can see that i’m in my project folder (red box on the right) and i’ve made new folders for all my data (each practical here) and images that are shown throuhgout….nice and organised!</p>
<p><img src="prac2_images/file_storage.png" width="500px" style="display: block; margin: auto;" /></p>
</div>
<div id="basics" class="section level3">
<h3><span class="header-section-number">2.4.5</span> Basics</h3>
<ol style="list-style-type: decimal">
<li>R has a very steep learning curve, but hopefully it won’t take long to get your head around the basics. For example, at its most simple R can be used as a calculator. In the console window (bottom left), just type the following and press enter:</li>
</ol>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="dv">1</span><span class="op">+</span><span class="dv">5</span></a></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>or</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="dv">4</span><span class="op">*</span><span class="dv">5</span><span class="op">^</span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] 100</code></pre>
<p>As you can see R performs these calculations instantly and prints the results in the console. This is useful for quick calculations but less useful for writing scripts requiring multiple operations or saving these for future use.</p>
<ol style="list-style-type: decimal">
<li><p>To save your scripts, you should create a new R Script file. Do this now: Select File &gt; New File &gt; R Script.</p></li>
<li><p>The R Script should open up on the top-left of your GUI. <strong>From now on type everything in this R script file and save it</strong></p></li>
</ol>
</div>
<div id="scripts-and-some-basic-commands" class="section level3">
<h3><span class="header-section-number">2.4.6</span> Scripts and some basic commands</h3>
<ol style="list-style-type: decimal">
<li>Usually one of the first things to do when starting a new R Script is to check that you are in the correct working directory. This is important especially if you are working on multiple projects in different locations. To do this type the following into your new empty R Script:</li>
</ol>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1"><span class="kw">getwd</span>()</a></code></pre></div>
<pre><code>## [1] &quot;C:/Users/Andy/OneDrive - University College London/Teaching/CASA0005/2020_2021/CASA0005repo&quot;</code></pre>
<ol style="list-style-type: decimal">
<li><p>To run this line, hold Ctrl (Cmd on a Mac) and press the Return(↲) key (if you are in the standard R installation, you would run your script with Ctrl R). You should now see your current working directory appear in the console.</p></li>
<li><p>Because of the new project we have already set up, this working directory should be correct, but if for any reason we wanted to change the working directory, we would use the <code>setwd()</code> function. For example, we wanted to change our directory to the documents folder on the C drive, we could run (don’t do this now):</p></li>
</ol>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="kw">setwd</span>(<span class="st">&quot;C:/Documents&quot;</span>)</a></code></pre></div>
<ol style="list-style-type: decimal">
<li><p>When we are sure we are working in the correct working directory, we can save our script by clicking on the save icon on the script tab. Save your script as something like “wk2_part1” and you will see it appear in your files window on the right hand side. As you build up a document of R code, you should get into the habit of saving your script periodically in case of an unexpected software crash.</p></li>
<li><p>We can now begin to write a script without the need to run each line every time we press enter. In the script editor type:</p></li>
</ol>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1">A &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb43-2" title="2">B &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb43-3" title="3">C &lt;-<span class="st"> </span>A<span class="op">+</span>B</a>
<a class="sourceLine" id="cb43-4" title="4">C</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<ol style="list-style-type: decimal">
<li><p>Select (highlight) the three lines and run all three lines with Ctrl Return(↲). You will notice the lines appear in the console (the other window). If you type C and press enter in the console (C and then ctrl return in the script window) you should have the number 3 appear. From now on I recommend you type all the commands below in the script first and then run them. Copying and pasting from this document won’t necessarily work.</p></li>
<li><p>You will also notice that in RStudio, values A, B and C will appear in your workspace window (top right). These variables are stored in memory for future use. Try giving A and B different values and see what happens. What about if you use lower case letters?</p></li>
<li><p>You have just demonstrated one of the powerful aspects of R, which is that it is an <strong>object oriented</strong> programming language. A, B and C are all objects that have been assigned a value with the &lt;- symbol (you can also use the = sign, but it operates slightly differently to &lt;- in R, plus the arrow assignment has become standard over the years. Use <strong>alt -</strong> to type it automatically). This principle underlies the whole language and enables users to create ever more complex objects as they progress through their analysis. If you type:</p></li>
</ol>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1"><span class="kw">ls</span>()</a></code></pre></div>
<pre><code>## [1] &quot;A&quot;        &quot;all_pkgs&quot; &quot;B&quot;        &quot;C&quot;        &quot;con&quot;      &quot;mycsv&quot;    &quot;session&quot; 
## [8] &quot;shape&quot;</code></pre>
<p>R will produce a list of objects that are currently active.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" title="1"><span class="kw">rm</span>(A)</a></code></pre></div>
<p>will remove the object A from the workspace (do <code>ls()</code> again to check this or look in your workspace window).</p>
</div>
<div id="functions" class="section level3">
<h3><span class="header-section-number">2.4.7</span> Functions</h3>
<ol style="list-style-type: decimal">
<li>Both <code>rm()</code> and <code>ls()</code> are known as functions. Functions are the other fundamental aspect to the R language. Functions can be thought of as single or multiple calculations that you apply to objects. They generally take the form of…(don’t run these)</li>
</ol>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1"><span class="cf">function</span>(object, argument1, argument2, argument3)</a></code></pre></div>
<p>Where the object is some form of data and the arguments parameterise what the function will do.</p>
<p>You could save the ouput to a new object using something like…</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" title="1">X&lt;-<span class="cf">function</span>(data, argument1, argument2, argument3)</a></code></pre></div>
<ol style="list-style-type: decimal">
<li>You can write your own functions to carry out tasks (and we’ll come onto that in subsequent practical sessions), but normally you will just used one of the virtually infinite number of functions that other people have already written for us.</li>
</ol>
</div>
<div id="basic-plotting" class="section level3">
<h3><span class="header-section-number">2.4.8</span> Basic plotting</h3>
<p>One common function is the <code>plot()</code> function for displaying data as a graphical output. Add these lines to your script and run them as before and you can see some <code>plot()</code> outputs:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1"><span class="co">#create some datasets, first a vector of 1-100 and 101-200</span></a>
<a class="sourceLine" id="cb50-2" title="2">Data1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>)</a>
<a class="sourceLine" id="cb50-3" title="3">Data2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">101</span><span class="op">:</span><span class="dv">200</span>)</a>
<a class="sourceLine" id="cb50-4" title="4"><span class="co">#Plot the data</span></a>
<a class="sourceLine" id="cb50-5" title="5"><span class="kw">plot</span>(Data1, Data2, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)</a></code></pre></div>
<p><img src="CASA0005_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" title="1"><span class="co">#just for fun, create some more, this time some normally distributed</span></a>
<a class="sourceLine" id="cb51-2" title="2"><span class="co">#vectors of 100 numbers</span></a>
<a class="sourceLine" id="cb51-3" title="3">Data3 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dt">mean =</span> <span class="dv">53</span>, <span class="dt">sd=</span><span class="dv">34</span>)</a>
<a class="sourceLine" id="cb51-4" title="4">Data4 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dt">mean =</span> <span class="dv">64</span>, <span class="dt">sd=</span><span class="dv">14</span>)</a>
<a class="sourceLine" id="cb51-5" title="5"><span class="co">#plot</span></a>
<a class="sourceLine" id="cb51-6" title="6"><span class="kw">plot</span>(Data3, Data4, <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>)</a></code></pre></div>
<p><img src="CASA0005_files/figure-html/unnamed-chunk-71-1.png" width="672" /></p>
<ol style="list-style-type: decimal">
<li>In the code above, you will have noticed the <code>#</code> symbol. This signifies that whatever comes after it on that line is a comment. Comments are ignored by the R console and they allow you to annotate your code so that you know what it is doing. It is good programming practice to comment your code extensively so that you can keep track of what your scripts are for.</li>
</ol>
<p><strong>Warning</strong> Heed our advice now and comment your code it will save you time in the future!</p>
</div>
<div id="help" class="section level3">
<h3><span class="header-section-number">2.4.9</span> Help</h3>
<ol style="list-style-type: decimal">
<li>The previous lines of code also demonstrated a number of functions: <code>c()</code> concatenates a string of numbers together into a vector. 1:100 means produce the integers between and including 1:100, the <code>plot()</code> function plots the two data objects and includes a parameter to change the colour of the points. To understand what a function does, you can consult the R Help system. Simply type a question mark and then the function name; for example:</li>
</ol>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1">?plot</a></code></pre></div>
<p><img src="prac2_images/rhelp.png" width="300px" style="display: block; margin: auto;" /></p>
<ol style="list-style-type: decimal">
<li>In RStudio you will see the help file appear in the Help window in the bottom right of the GUI. Here you can also search for the help files for other functions in the search bar.</li>
</ol>
</div>
<div id="data-structures" class="section level3">
<h3><span class="header-section-number">2.4.10</span> Data structures</h3>
<ol style="list-style-type: decimal">
<li>Objects in R can exist as a number of different data structures. These include a <strong>matrix</strong>, an <strong>array</strong>, a <strong>vector</strong>, a <strong>data frame</strong> and a <strong>list</strong>.</li>
</ol>
<p>The main criteria for division of these structures is data type homogeneity.</p>
<p>A vector, matrix and array must only contain data of the <strong>same type</strong> (e.g. numeric or text)</p>
<p>A list or data frame can contain a mixture of data types (e.g. numeric and text).</p>
<p>Further divisions are then made based on the number of dimesions (1D, 2D, 3D or more) each can have…</p>
<p><img src="prac2_images/data_structures.png" width="450px" style="display: block; margin: auto;" /></p>
<p>For the purposes of this practical we will focus on data frames. These are the most flexible data format in R (although tibbles are now becoming popular as well — they are just more flexible versions of data frames, for example they can have a list as a column). Data frames can be conceptualised in a similar way to a spreadsheet with data held in rows and columns. They are the most commonly used object type in R and the most straightforward to create from the two vector objects we just created.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(Data1, Data2)</a>
<a class="sourceLine" id="cb53-2" title="2"><span class="kw">plot</span>(df, <span class="dt">col=</span><span class="st">&quot;green&quot;</span>)</a></code></pre></div>
<p><img src="CASA0005_files/figure-html/unnamed-chunk-75-1.png" width="672" /></p>
<ol style="list-style-type: decimal">
<li>If you have a very large data frame (thousands or millions of rows) it is useful to see only a selection of these. There are several ways of doing this:</li>
</ol>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb54-2" title="2"><span class="co">#show the first 10 and then last 10 rows of data in df...</span></a>
<a class="sourceLine" id="cb54-3" title="3">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb54-4" title="4"><span class="st">  </span><span class="kw">head</span>()</a></code></pre></div>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb55-2" title="2"><span class="st">  </span><span class="kw">tail</span>()</a></code></pre></div>
<div class="infobox warning">
<p>You might have noticed the syntax (code) <code>%&gt;%</code>, this is called a <strong>pipe</strong> and is an operator is part from the <code>magrittr</code> package. <code>magrittr</code> is an entirely new way of thinking about R syntax that cleraly expresses a sequence of multiple operations. It is useful to think of the pipe operator as simply meaning “then”. Do this <strong>THEN</strong> do this <strong>THEN</strong> do that.</p>
</div>
<p>You can also view elements of your data frame in RStudio by simply clicking on it in the top-right Environment window:</p>
<p><img src="prac2_images/dataview.png" width="800px" style="display: block; margin: auto;" /></p>
</div>
<div id="elements-of-a-data-frame" class="section level3">
<h3><span class="header-section-number">2.4.11</span> Elements of a data frame</h3>
<ol style="list-style-type: decimal">
<li>When programming you will frequently want to refer to different elements in a data frame or a vector/list. To select elements of a data frame, or subset it, you can refer specifically to ranges or elements of rows and columns. These are accessed using the single square bracket operator [], with the form:</li>
</ol>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1">data.frame[row,column]</a></code></pre></div>
<p>Rows are always referenced first, before the comma, columns second, after the comma.</p>
<ol style="list-style-type: decimal">
<li>Try the subsetting your df data frame with the following commands to see what is returned:</li>
</ol>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1">df[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb57-2" title="2">df[<span class="dv">5</span><span class="op">:</span><span class="dv">15</span>,]</a>
<a class="sourceLine" id="cb57-3" title="3">df[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">6</span>),<span class="dv">2</span>]</a>
<a class="sourceLine" id="cb57-4" title="4">df[,<span class="dv">1</span>]</a></code></pre></div>
<ol style="list-style-type: decimal">
<li>You will note that the column headings are the names of the original objects creating the data frame. We can change these using the <code>rename()</code> function from <code>dplyr</code> that is loaded as part of the <code>tidyverse</code> package, we will come to this next:</li>
</ol>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1">df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">column1 =</span> Data1, <span class="dt">column2=</span>Data2)</a></code></pre></div>
<p><code>dplyr</code> is a grammar of data manipulation, it has multiple verbs that allow you to change your data into a suitable format. These include <code>select()</code>, <code>filter()</code>, <code>summarise()</code>, which can also be applied to groups in datasets using <code>group_by()</code>. <code>dplyr</code> will be used throughout this course.</p>
<p>In the majority of cases you provide some kind of data to <code>dplyr</code> followed by a <code>%&gt;%</code> then a verb (or other function), then another <code>%&gt;%</code> and more verbs of functions if needed. As in the code above you can also assign the output to an object with <code>&lt;-</code>.</p>
<p><img src="allisonhorst_images/dplyr_wrangling.png" width="450pt" style="display: block; margin: auto;" /></p>
<p>To select or refer to columns directly by name, we can either use <code>dplyr</code> again!</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-2" title="2"><span class="st">  </span><span class="kw">select</span>(column1)</a></code></pre></div>
<p>However, you should be aware of other methods for doing this, as not all spatial data is compatible with <code>dplyr</code> yet, such as raster data, which will be important for next week. So we can also use the <code>$</code> operator, which takes the form <code>data.frame$columnName</code>, e.g.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1">df<span class="op">$</span>column1</a></code></pre></div>
<p>or we can use the double square bracket operator [[]], and refer to our column by name using quotes e.g.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" title="1">df[[<span class="st">&quot;column1&quot;</span>]]</a></code></pre></div>
<p>This again is useful if you have a lot of columns and you wish to efficiently extract one of them.</p>
</div>
</div>
<div id="reading-data-into-r" class="section level2">
<h2><span class="header-section-number">2.5</span> Reading data into R</h2>
<p>One of the most tedious things a spatial analyst / data scientist has to do is clean their data so it doesn’t cause problems for the software later. In the past, we would have needed to do this by hand — these days, we can use software to do much of this for us.</p>
<p>I will now give you two options to arrive at a nice cleaned dataset. For this example we are going to use the London Datastore Catalogue.</p>
<p>Go to: <a href="https://data.london.gov.uk/dataset/f33fb38c-cb37-48e3-8298-84c0d3cc5a6c" class="uri">https://data.london.gov.uk/dataset/f33fb38c-cb37-48e3-8298-84c0d3cc5a6c</a> and download the excel document for ward profiles.</p>
<div id="old-skool-cleaning" class="section level3">
<h3><span class="header-section-number">2.5.1</span> Old skool cleaning</h3>
<ol style="list-style-type: decimal">
<li><p>Open the <code>ward-profiles-excel-version.xls</code> file in Excel, and save as <code>LondonData.csv</code> into your <code>wk2/RProject folder</code>.</p></li>
<li><p>Open your new <code>.csv</code> file in Excel. There might be some non-numeric values inside numeric columns which will cause problems in your analysis. These need to be removed before proceeding any further. To remove these, you can use the replace function in Excel. In the home tab under ‘Editing’ open up the find and replace dialogue box and enter the following into the find box:</p></li>
</ol>
<p><code>#VALUE!</code> <code>n/a</code></p>
<p>Leave the replace box empty each time and click Replace All to remove these from your file, before saving the file again.</p>
<ol style="list-style-type: decimal">
<li>Once you have cleaned out all of the trixy characters from the file, to read it into R, we will use the <code>read.csv()</code> function:</li>
</ol>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1">LondonDataOSK&lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;prac2_data/ward-profiles-excel-version.csv&quot;</span>, </a>
<a class="sourceLine" id="cb62-2" title="2">                         <span class="dt">header =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb62-3" title="3">                         <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>,  </a>
<a class="sourceLine" id="cb62-4" title="4">                         <span class="dt">encoding =</span> <span class="st">&quot;latin1&quot;</span>)</a></code></pre></div>
<blockquote>
<p><strong>Note</strong>, I’ve made an R project for all these practicals, which is why my file path starts with <code>prac2_data/</code>. If you save the <code>.csv</code> in the same folder as the <code>.Rproj</code> then you can just use:</p>
</blockquote>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" title="1">LondonDataOSK&lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;ward-profiles-excel-version.csv&quot;</span>, </a>
<a class="sourceLine" id="cb63-2" title="2">                         <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>)</a></code></pre></div>
<p>If you look at the <code>read.csv()</code> help file - <code>?read.csv</code> - you will see that we can actually include many more parameters when reading in a <code>.csv</code> file. For example, we could read in the same file as follows:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1"><span class="co"># by default in R, the file path should be defined with / </span></a>
<a class="sourceLine" id="cb64-2" title="2"><span class="co">#but on a windows file system it is defined with \. </span></a>
<a class="sourceLine" id="cb64-3" title="3"><span class="co">#Using \\ instead allows R </span></a>
<a class="sourceLine" id="cb64-4" title="4"><span class="co">#to read the path correctly – alternatively, just use /</span></a>
<a class="sourceLine" id="cb64-5" title="5">LondonDataOSK&lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;prac2_data/ward-profiles-excel-version.csv&quot;</span>, </a>
<a class="sourceLine" id="cb64-6" title="6">                         <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>, <span class="dt">encoding =</span> <span class="st">&quot;latin1&quot;</span>)</a></code></pre></div>
<p>This would specify that the first row of the file contains header information; and the values in the file are separated with commas (not ; or : as can be the case sometimes).</p>
</div>
<div id="here" class="section level3">
<h3><span class="header-section-number">2.5.2</span> Here</h3>
<p>However, this is also another more straightforward way to read in files that was devloped in 2017 to make it more intuitive to find and load files using the <code>here</code> package. You need to install and load it:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;here&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1"><span class="kw">library</span>(here)</a></code></pre></div>
<pre><code>## here() starts at C:/Users/Andy/OneDrive - University College London/Teaching/CASA0005/2020_2021/CASA0005repo</code></pre>
<p>Think of <code>here()</code> as a command that is just poitning to a file path, to find out where is pointing use…</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" title="1">here<span class="op">::</span><span class="kw">here</span>()</a></code></pre></div>
<p>This is my working directory for this book project! Now i can use this to load my data that is in my practical 2 folder just like this….</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1">LondonDataOSK&lt;-<span class="st"> </span><span class="kw">read.csv</span>(here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;prac2_data&quot;</span>,<span class="st">&quot;ward-profiles-excel-version.csv&quot;</span>), </a>
<a class="sourceLine" id="cb69-2" title="2">                         <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>,  </a>
<a class="sourceLine" id="cb69-3" title="3">                         <span class="dt">encoding =</span> <span class="st">&quot;latin1&quot;</span>)</a></code></pre></div>
<p>This just removes any need for ever using a <code>/</code> or <code>\\</code> in your file path. As with everything in code, there is no right way, use what suits you.</p>
<p><img src="allisonhorst_images/here.png" width="450pt" style="display: block; margin: auto;" /></p>
</div>
<div id="new-skool-cleaning" class="section level3">
<h3><span class="header-section-number">2.5.3</span> New skool cleaning</h3>
<p>To clean our data as we read it in, we are going to use a package called <code>readr</code> which also comes bundled as part of the <code>tidyverse</code> package.</p>
<p><img src="allisonhorst_images/tidyverse_celestial.png" width="450pt" style="display: block; margin: auto;" /></p>
<p>The <a href="https://www.tidyverse.org/"><code>tidyverse</code></a> is simply a collection of pacakges relevant for data science, containing almost everything you need to become a kick-ass data scientist.</p>
<p>Now let’s use the <code>readr</code> package… that allows loads of data manipulation …for example…</p>
<p><img src="allisonhorst_images/parse_number.png" width="450pt" style="display: block; margin: auto;" /></p>
<p>Here we will use it to just read in a <code>.csv</code> file (directly from the web this time — <code>read.csv</code> can do this too) and clean text characters out from the numeric columns before they cause problems:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" title="1"><span class="co">#wang the data in straight from the web using read_csv, </span></a>
<a class="sourceLine" id="cb70-2" title="2"><span class="co">#skipping over the &#39;n/a&#39; entries as you go...</span></a>
<a class="sourceLine" id="cb70-3" title="3">LondonData &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://files.datapress.com/london/dataset/ward-profiles-and-atlas/2015-09-24T14:21:24/ward-profiles-excel-version.csv&quot;</span>,</a>
<a class="sourceLine" id="cb70-4" title="4">                       <span class="dt">locale =</span> <span class="kw">locale</span>(<span class="dt">encoding =</span> <span class="st">&quot;latin1&quot;</span>),</a>
<a class="sourceLine" id="cb70-5" title="5">                       <span class="dt">na =</span> <span class="st">&quot;n/a&quot;</span>)</a></code></pre></div>
<blockquote>
<p><strong>Note</strong> the use of read_csv here as opposed to read.csv. They are very similar, but read_csv is just a bit better. Read <a href="http://yetanothermathprogrammingconsultant.blogspot.com/2016/12/reading-csv-files-in-r-readcsv-vs.html">this blog post</a> for more information. Also, for those python fans out there —IT’S NOT THE SAME FUNCTION AS READ_CSV IN PYTHON</p>
</blockquote>
<p>What is <code>locale = locale(encoding = "latin1")</code>?…good question…it is basically the encoding of the data (how it is stored). There are a few different formats such as UTF-8 and latin1. In latin1 each character is 1 byte long, in UTF-8 a character can consist of more than 1 byte. To my knowledge the default in R is encoded as latin1, but <code>readr</code> (the package we are using to read in the <code>.csv</code> is UTF-8 so we have to specify it.</p>
</div>
<div id="examining-your-new-data" class="section level3">
<h3><span class="header-section-number">2.5.4</span> Examining your new data</h3>
<ol style="list-style-type: decimal">
<li>Your new data has been read in as a data frame / tibble (remember a tibble is just a data frame with a few extra bells and whistles). If you ever need to check what data type your new data set is, we can use the <code>class()</code> function:</li>
</ol>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1"><span class="kw">class</span>(LondonData)</a></code></pre></div>
<pre><code>## [1] &quot;spec_tbl_df&quot; &quot;tbl_df&quot;      &quot;tbl&quot;         &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1"><span class="co"># or, if you have your old skool data</span></a>
<a class="sourceLine" id="cb73-2" title="2"><span class="kw">class</span>(LondonDataOSK)</a></code></pre></div>
<p>We can also use the <code>class()</code> function (from base R) within another two functions <code>summarise_all()</code> (from <code>dplyr</code>) and <code>pivot_longer()</code> (from <code>tidyr</code>) to check that our data has been read in correctly and that, for example, numeric data haven’t been read in as text or other variables. Run the following line of code:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" title="1">Datatypelist &lt;-<span class="st"> </span>LondonData <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb74-2" title="2"><span class="st">  </span><span class="kw">summarise_all</span>(class) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-3" title="3"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="kw">everything</span>(), </a>
<a class="sourceLine" id="cb74-4" title="4">               <span class="dt">names_to=</span><span class="st">&quot;All_variables&quot;</span>, </a>
<a class="sourceLine" id="cb74-5" title="5">               <span class="dt">values_to=</span><span class="st">&quot;Variable_class&quot;</span>)</a>
<a class="sourceLine" id="cb74-6" title="6"></a>
<a class="sourceLine" id="cb74-7" title="7">Datatypelist</a></code></pre></div>
<pre><code>## # A tibble: 67 x 2
##    All_variables                      Variable_class
##    &lt;chr&gt;                              &lt;chr&gt;         
##  1 Ward name                          character     
##  2 Old code                           character     
##  3 New code                           character     
##  4 Population - 2015                  numeric       
##  5 Children aged 0-15 - 2015          numeric       
##  6 Working-age (16-64) - 2015         numeric       
##  7 Older people aged 65+ - 2015       numeric       
##  8 % All Children aged 0-15 - 2015    numeric       
##  9 % All Working-age (16-64) - 2015   numeric       
## 10 % All Older people aged 65+ - 2015 numeric       
## # ... with 57 more rows</code></pre>
<p>We cover <code>pivot_longer()</code> later in this practical, but for now we’ve simply grouped all our variables into one <strong>LONG</strong> column adding another column that contains the class.</p>
<p>You should see that all columns that should be numbers are read in as numeric. Try reading in LondonData again, but this time without excluding the ‘n/a’ values in the file, e.g.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" title="1">LondonData &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://files.datapress.com/london/dataset/ward-profiles-and-atlas/2015-09-24T14:21:24/ward-profiles-excel-version.csv&quot;</span>, </a>
<a class="sourceLine" id="cb76-2" title="2">                       <span class="dt">locale =</span> <span class="kw">locale</span>(<span class="dt">encoding =</span> <span class="st">&quot;latin1&quot;</span>))</a></code></pre></div>
<p>Now run the Datatypelist code again — you should see that some of the columns (those the n/a values in) have been read in as something other than numeric. This is why we need to exclude them. Isn’t <code>readr</code> great for helping us avoid reading in our numeric data as text!</p>
<p>If you ever wish to quickly edit data, then use <code>edit()</code></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1">LondonData &lt;-<span class="st"> </span><span class="kw">edit</span>(LondonData)</a></code></pre></div>
<ol style="list-style-type: decimal">
<li>It is also possible to quickly and easily summarise the data or look at the column headers using</li>
</ol>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" title="1"><span class="kw">summary</span>(df)</a></code></pre></div>
<pre><code>##     column1          column2     
##  Min.   :  1.00   Min.   :101.0  
##  1st Qu.: 25.75   1st Qu.:125.8  
##  Median : 50.50   Median :150.5  
##  Mean   : 50.50   Mean   :150.5  
##  3rd Qu.: 75.25   3rd Qu.:175.2  
##  Max.   :100.00   Max.   :200.0</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" title="1">LondonData<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb80-2" title="2"><span class="st">  </span><span class="kw">colnames</span>()<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb80-3" title="3"><span class="st">  </span><span class="co"># just look at the head, top5</span></a>
<a class="sourceLine" id="cb80-4" title="4"><span class="st">  </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>## [1] &quot;Ward name&quot;                  &quot;Old code&quot;                  
## [3] &quot;New code&quot;                   &quot;Population - 2015&quot;         
## [5] &quot;Children aged 0-15 - 2015&quot;  &quot;Working-age (16-64) - 2015&quot;</code></pre>
</div>
<div id="data-manipulation-in-r" class="section level3">
<h3><span class="header-section-number">2.5.5</span> Data manipulation in R</h3>
<p>Now we have some data read into R, we need to select a small subset to work on. The first thing we will do is select just the London Boroughs to work with. If you recall, the Borough data is at the bottom of the file.</p>
<div id="selecting-rows" class="section level4">
<h4><span class="header-section-number">2.5.5.1</span> Selecting rows</h4>
<ol style="list-style-type: decimal">
<li>Your borough data will probably be found between rows 626 and 658. Therefore we will first create a subset by selecting these rows into a new data frame and then reducing that data frame to just four columns. There are a few ways of doing this:</li>
</ol>
<p>We could select just the rows we need by explicitly specifying the range of rows we need:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" title="1">LondonBoroughs&lt;-LondonData[<span class="dv">626</span><span class="op">:</span><span class="dv">658</span>,]</a></code></pre></div>
<p>We can also do this with <code>dplyr</code>… with the <code>slice()</code> function, taking a “slice” out of the dataset…</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" title="1">LondonBoroughs&lt;-LondonData<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb83-2" title="2"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">626</span><span class="op">:</span><span class="dv">658</span>)</a></code></pre></div>
<p>However, we can instead try a cool ‘data sciency’ way of pulling out the rows we want with the knowledge that the codes for London Boroughs start with E09 (the wards in the rest of the file start with E05).</p>
<p><code>dplyr</code> has a cool function called <code>filter()</code>that let’s you subset rows based on conditions…</p>
<p><img src="allisonhorst_images/dplyr_filter.jpg" width="500pt" style="display: block; margin: auto;" />
Here, we could filter based on a variable, for example extracting all the wards where female life expextancy is greather than 90.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" title="1">Femalelifeexp&lt;-<span class="st"> </span>LondonData <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb84-2" title="2"><span class="st">  </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">Female life expectancy -2009-13</span><span class="st">`</span><span class="op">&gt;</span><span class="dv">90</span>)</a></code></pre></div>
<p>However, our <code>New code</code> column that holds Borough codes can’t be filtered like this as it’s in a character format…in cases like this we can use the function <code>str_detect()</code> from the <code>stringr</code> package in combination with <code>filter()</code> from <code>dplyr</code>. Both these packages are part of the <code>tidyverse</code> again!</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" title="1">LondonBoroughs&lt;-<span class="st"> </span>LondonData <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb85-2" title="2"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(<span class="st">`</span><span class="dt">New code</span><span class="st">`</span>, <span class="st">&quot;^E09&quot;</span>))</a></code></pre></div>
<p>Check it worked:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" title="1">LondonBoroughs<span class="op">$</span><span class="st">`</span><span class="dt">Ward name</span><span class="st">`</span></a></code></pre></div>
<p>😎<strong>AWWMAHGAWD!!!</strong> 😎Pretty cool hey?</p>
<p>What that code is saying is <code>stringr</code> look for the rows that have the ward code like E09, then filter these and store in the object <code>LondonBoroughs</code></p>
<p>The <code>stringr</code> package is really great and if you ever need to manipulate text type data then it’s the place to start.</p>
<p>You will notice that you will have two rows at the top for the City of London. This is because it features twice in the data set. That’s fine, extract only unique rows with <code>distinct()</code>, again from <code>dplyr</code>:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" title="1">LondonBoroughs&lt;-LondonBoroughs <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb87-2" title="2"><span class="st">  </span><span class="kw">distinct</span>()</a></code></pre></div>
</div>
<div id="selecting-columns" class="section level4">
<h4><span class="header-section-number">2.5.5.2</span> Selecting columns</h4>
<p>We can select columns if we know which index we want, starting from the first column that’s 1..</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" title="1"><span class="co">#select columns 1,19,20 and 21</span></a>
<a class="sourceLine" id="cb88-2" title="2">LondonBoroughs_manualcols&lt;-LondonBoroughs[,<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">19</span>,<span class="dv">20</span>,<span class="dv">21</span>)]</a></code></pre></div>
<p>We can also replicate this with <code>dplyr</code> with <code>select()</code></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" title="1"><span class="co">#select columns 1,19,20 and 21</span></a>
<a class="sourceLine" id="cb89-2" title="2">LondonBoroughs_dplyrcols&lt;-LondonBoroughs <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb89-3" title="3"><span class="st">  </span><span class="kw">select</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">19</span>,<span class="dv">20</span>,<span class="dv">21</span>))</a></code></pre></div>
<ol style="list-style-type: decimal">
<li><p>You will have noticed the use of square brackets above –– these are very useful in R. The <code>c()</code> function is also used here — this is the ‘combine’ function — another very useful function in R which allows arguments (in this case, column reference numbers) into a single value.</p></li>
<li><p>However, we could also again use a more ‘data sciency way’…selecting the columns that contain certain words …</p></li>
</ol>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" title="1">LondonBoroughs_contains&lt;-LondonBoroughs <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb90-2" title="2"><span class="st">  </span><span class="kw">select</span>(<span class="kw">contains</span>(<span class="st">&quot;expectancy&quot;</span>), </a>
<a class="sourceLine" id="cb90-3" title="3">         <span class="kw">contains</span>(<span class="st">&quot;obese - 2011/12 to 2013/14&quot;</span>),</a>
<a class="sourceLine" id="cb90-4" title="4">         <span class="kw">contains</span>(<span class="st">&quot;Ward name&quot;</span>)) </a></code></pre></div>
</div>
<div id="renaming-columns" class="section level4">
<h4><span class="header-section-number">2.5.5.3</span> Renaming columns</h4>
<ol style="list-style-type: decimal">
<li>You will notice that the column names are slightly misleading as we are now working with boroughs rather than wards. You probably will also be annoyed (like me!) that the column names are full of <code>...</code> that just make eveything hard to read. So, let’s rename the wards column to boroughs (using <code>rename()</code> like we did earlier), then using the <code>Janitor</code> package tidy everything up…</li>
</ol>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" title="1"><span class="kw">library</span>(janitor)</a>
<a class="sourceLine" id="cb91-2" title="2"></a>
<a class="sourceLine" id="cb91-3" title="3">LondonBoroughs &lt;-<span class="st"> </span>LondonBoroughs <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb91-4" title="4"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">Borough=</span><span class="st">`</span><span class="dt">Ward name</span><span class="st">`</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb91-5" title="5"><span class="st">  </span><span class="kw">clean_names</span>()</a></code></pre></div>
<p>By defualt <code>Janitor</code> removes all capitals and uses an underscore wherever there is a space, this would be the same as using setting the <code>case</code> argument to snake…</p>
<p><img src="allisonhorst_images/janitor_clean_names.png" width="500pt" style="display: block; margin: auto;" /></p>
<p>If you wanted to now change it every word having a capital letter you would run…but don’t do this now.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" title="1">LondonBoroughs &lt;-<span class="st"> </span>LondonBoroughs <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb92-2" title="2"><span class="st">  </span><span class="co">#here the ., means all data</span></a>
<a class="sourceLine" id="cb92-3" title="3"><span class="st">  </span><span class="kw">clean_names</span>(., <span class="dt">case=</span><span class="st">&quot;big_camel&quot;</span>)</a></code></pre></div>
</div>
<div id="more-dplyr-verbs" class="section level4">
<h4><span class="header-section-number">2.5.5.4</span> More <code>dplyr</code> verbs</h4>
<p>What about determining both (a) the average of male and female life expectancy together and (b) a normalised value for each London borough based on the London average. Then selecting only the name of the Borough, mean life expectancy and normalised life expectancy, arranging the output based on the normalised life expectancy in descending order…</p>
<p>To do this we will rely on the <code>mutate()</code> function that let’s us add new variables based on existing ones…</p>
<p><img src="allisonhorst_images/dplyr_mutate.png" width="500pt" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" title="1">Life_expectancy &lt;-<span class="st"> </span>LondonBoroughs <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb93-2" title="2"><span class="st">  </span><span class="co">#new column with average of male and female life expectancy</span></a>
<a class="sourceLine" id="cb93-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">averagelifeexpectancy=</span> (female_life_expectancy_<span class="dv">2009</span>_<span class="dv">13</span> <span class="op">+</span></a>
<a class="sourceLine" id="cb93-4" title="4"><span class="st">                                       </span>male_life_expectancy_<span class="dv">2009</span>_<span class="dv">13</span>)<span class="op">/</span><span class="dv">2</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb93-5" title="5"><span class="st">  </span><span class="co">#new column with normalised life expectancy</span></a>
<a class="sourceLine" id="cb93-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">normalisedlifeepectancy=</span> averagelifeexpectancy <span class="op">/</span></a>
<a class="sourceLine" id="cb93-7" title="7"><span class="st">           </span><span class="kw">mean</span>(averagelifeexpectancy))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb93-8" title="8"><span class="st">  </span><span class="co">#select only columns we want</span></a>
<a class="sourceLine" id="cb93-9" title="9"><span class="st">  </span><span class="kw">select</span>(new_code,</a>
<a class="sourceLine" id="cb93-10" title="10">         borough,</a>
<a class="sourceLine" id="cb93-11" title="11">         averagelifeexpectancy, </a>
<a class="sourceLine" id="cb93-12" title="12">         normalisedlifeepectancy)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb93-13" title="13"><span class="st">  </span><span class="co">#arrange in descending order</span></a>
<a class="sourceLine" id="cb93-14" title="14"><span class="st">  </span><span class="co">#ascending is the default and would be</span></a>
<a class="sourceLine" id="cb93-15" title="15"><span class="st">  </span><span class="co">#arrange(normalisedlifeepectancy)</span></a>
<a class="sourceLine" id="cb93-16" title="16"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(normalisedlifeepectancy))</a></code></pre></div>
<p>We can also use <code>dplyr</code> to show us the top and bottom number of rows instead of using <code>head</code> or <code>tail</code> like we did earlier.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" title="1"><span class="co">#top of data</span></a>
<a class="sourceLine" id="cb94-2" title="2"><span class="kw">slice_head</span>(Life_expectancy, <span class="dt">n=</span><span class="dv">5</span>)</a></code></pre></div>
<pre><code>## # A tibble: 5 x 4
##   new_code  borough                averagelifeexpectancy normalisedlifeepectancy
##   &lt;chr&gt;     &lt;chr&gt;                                  &lt;dbl&gt;                   &lt;dbl&gt;
## 1 E09000001 City of London                          86.4                    1.05
## 2 E09000020 Kensington and Chelsea                  84.4                    1.03
## 3 E09000015 Harrow                                  84.2                    1.02
## 4 E09000027 Richmond upon Thames                    83.9                    1.02
## 5 E09000033 Westminster                             83.8                    1.02</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" title="1"><span class="co">#bottom of data</span></a>
<a class="sourceLine" id="cb96-2" title="2"><span class="kw">slice_tail</span>(Life_expectancy,<span class="dt">n=</span><span class="dv">5</span>)</a></code></pre></div>
<pre><code>## # A tibble: 5 x 4
##   new_code  borough              averagelifeexpectancy normalisedlifeepectancy
##   &lt;chr&gt;     &lt;chr&gt;                                &lt;dbl&gt;                   &lt;dbl&gt;
## 1 E09000011 Greenwich                             80.8                   0.983
## 2 E09000012 Hackney                               80.7                   0.982
## 3 E09000025 Newham                                80.6                   0.980
## 4 E09000002 Barking and Dagenham                  80.1                   0.974
## 5 E09000030 Tower Hamlets                         80.0                   0.974</code></pre>
</div>
<div id="levelling-up-withdplyr" class="section level4">
<h4><span class="header-section-number">2.5.5.5</span> Levelling up with<code>dplyr</code></h4>
<p>So far, we’ve really just covered basic operations with <code>dplyr</code> that you might have previously done in Excel. However, <code>dplyr</code> has much more powerful functions that can make advanced data wrangling a breeze. Whilst we’ve looked at life expectancy in the London boroughs relative to each other, how does the life expectancy of the London Boroughs compare the the UK average of 81.16?</p>
<p>To answer this question we can use the <code>case_when()</code>, whereby if the value is greater than 81.16 we can assign the Borough a string of “above UK average”, and if below a string of “below UK average”….</p>
<p><img src="allisonhorst_images/dplyr_case_when.png" width="500pt" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" title="1">Life_expectancy2 &lt;-<span class="st"> </span>Life_expectancy <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb98-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">UKcompare =</span> <span class="kw">case_when</span>(averagelifeexpectancy<span class="op">&gt;</span><span class="fl">81.16</span> <span class="op">~</span><span class="st"> &quot;above UK average&quot;</span>,</a>
<a class="sourceLine" id="cb98-3" title="3">                               <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;below UK average&quot;</span>))</a>
<a class="sourceLine" id="cb98-4" title="4">Life_expectancy2</a></code></pre></div>
<pre><code>## # A tibble: 33 x 5
##    new_code  borough         averagelifeexpect~ normalisedlifeepec~ UKcompare   
##    &lt;chr&gt;     &lt;chr&gt;                        &lt;dbl&gt;               &lt;dbl&gt; &lt;chr&gt;       
##  1 E09000001 City of London                86.4                1.05 above UK av~
##  2 E09000020 Kensington and~               84.4                1.03 above UK av~
##  3 E09000015 Harrow                        84.2                1.02 above UK av~
##  4 E09000027 Richmond upon ~               83.9                1.02 above UK av~
##  5 E09000033 Westminster                   83.8                1.02 above UK av~
##  6 E09000007 Camden                        83.6                1.02 above UK av~
##  7 E09000003 Barnet                        83.4                1.02 above UK av~
##  8 E09000006 Bromley                       83.1                1.01 above UK av~
##  9 E09000021 Kingston upon ~               82.9                1.01 above UK av~
## 10 E09000005 Brent                         82.4                1.00 above UK av~
## # ... with 23 more rows</code></pre>
<p>Now whilst this is useful, it doesn’t tell is much more about the data itself, what if we wanted to know the range of life expectancies for London Boroughs that are above the national average….</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" title="1">Life_expectancy2_group &lt;-<span class="st"> </span>Life_expectancy2 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb100-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">UKdiff =</span> averagelifeexpectancy<span class="fl">-81.16</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb100-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(UKcompare )<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb100-4" title="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">range=</span><span class="kw">max</span>(UKdiff)<span class="op">-</span><span class="kw">min</span>(UKdiff), <span class="dt">count=</span><span class="kw">n</span>(), <span class="dt">Average=</span><span class="kw">mean</span>(UKdiff))</a></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" title="1">Life_expectancy2_group</a></code></pre></div>
<pre><code>## # A tibble: 2 x 4
##   UKcompare        range count Average
##   &lt;chr&gt;            &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
## 1 above UK average  5.25    25   1.52 
## 2 below UK average  0.9      8  -0.572</code></pre>
<p>This is useful, but now what if we wanted to have more information based on the distribution of the Boroughs compared to the national average, as opposed to just over or under….there are a few ways to do this..</p>
<p>We are going to:</p>
<ol style="list-style-type: decimal">
<li>Again work out difference between the life expectancy of the Boroughs compared to the national average</li>
<li>Round the whole table based on if the column is numeric (this isn’t required and we’re not adding a new column). Here we are using <code>across</code> that applies some kind of transformation across the columns selected (or that are numeric in this case).</li>
</ol>
<p><img src="allisonhorst_images/dplyr_across.png" width="450pt" style="display: block; margin: auto;" /></p>
<ol style="list-style-type: decimal">
<li>Round the column <code>UKdiff</code> to 0 decimcal places (not adding a new column)</li>
<li>Use <code>case_when()</code> to find Boroughs that have an average age of equal to or over 81 and create a new column that containts text based combining <code>equal or above UK average by</code> then the years created in UKdiff. We do this through the <code>str_c()</code> function from the <code>stringr</code> pacakge that let’s us join two or more vector elements into a single character vector. Here <code>sep</code> determines how these two vectors are separated.</li>
<li>Then group by the <code>UKcompare</code> column</li>
<li>Finally, count the number in each group.</li>
</ol>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" title="1">Life_expectancy3 &lt;-<span class="st"> </span>Life_expectancy <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb104-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">UKdiff =</span> averagelifeexpectancy<span class="fl">-81.16</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb104-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(is.numeric, round, <span class="dv">3</span>))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb104-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(UKdiff, round, <span class="dv">0</span>))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb104-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">UKcompare =</span> <span class="kw">case_when</span>(averagelifeexpectancy <span class="op">&gt;=</span><span class="st"> </span><span class="dv">81</span> <span class="op">~</span><span class="st"> </span></a>
<a class="sourceLine" id="cb104-6" title="6"><span class="st">                                 </span><span class="kw">str_c</span>(<span class="st">&quot;equal or above UK average by&quot;</span>,</a>
<a class="sourceLine" id="cb104-7" title="7">                                       UKdiff, </a>
<a class="sourceLine" id="cb104-8" title="8">                                       <span class="st">&quot;years&quot;</span>, </a>
<a class="sourceLine" id="cb104-9" title="9">                                       <span class="dt">sep=</span><span class="st">&quot; &quot;</span>), </a>
<a class="sourceLine" id="cb104-10" title="10">                               <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="kw">str_c</span>(<span class="st">&quot;below UK average by&quot;</span>,</a>
<a class="sourceLine" id="cb104-11" title="11">                                            UKdiff,</a>
<a class="sourceLine" id="cb104-12" title="12">                                            <span class="st">&quot;years&quot;</span>,</a>
<a class="sourceLine" id="cb104-13" title="13">                                            <span class="dt">sep=</span><span class="st">&quot; &quot;</span>)))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb104-14" title="14"><span class="st">  </span><span class="kw">group_by</span>(UKcompare)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb104-15" title="15"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count=</span><span class="kw">n</span>())</a></code></pre></div>
<pre><code>## Warning: Predicate functions must be wrapped in `where()`.
## 
##   # Bad
##   data %&gt;% select(is.numeric)
## 
##   # Good
##   data %&gt;% select(where(is.numeric))
## 
## i Please update your code.
## This message is displayed once per session.</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" title="1">Life_expectancy3</a></code></pre></div>
<pre><code>## # A tibble: 7 x 2
##   UKcompare                            count
##   &lt;chr&gt;                                &lt;int&gt;
## 1 below UK average by -1 years             3
## 2 below UK average by 0 years              5
## 3 equal or above UK average by 0 years     4
## 4 equal or above UK average by 1 years    12
## 5 equal or above UK average by 2 years     4
## 6 equal or above UK average by 3 years     4
## 7 equal or above UK average by 5 years     1</code></pre>
<p>There is a lot of information here that we could use and make into a plot or map. For example, the Borough count of life expectancy difference could be visualised in a histogram (covered next week). Or, we could map the difference between the average life expectancy of each London Borough compared to the UK average..to do this would can just reuse some of the code from the example above….</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" title="1">Life_expectancy4 &lt;-<span class="st"> </span>Life_expectancy <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb109-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">UKdiff =</span> averagelifeexpectancy<span class="fl">-81.16</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb109-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(is.numeric, round, <span class="dv">3</span>))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb109-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(UKdiff, round, <span class="dv">0</span>))</a></code></pre></div>
</div>
</div>
<div id="plotting" class="section level3">
<h3><span class="header-section-number">2.5.6</span> Plotting</h3>
<p>For a simple and quick plot, we can use the <code>plot()</code> function…</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" title="1"><span class="kw">plot</span>(LondonBoroughs<span class="op">$</span>male_life_expectancy_<span class="dv">2009</span>_<span class="dv">13</span>,</a>
<a class="sourceLine" id="cb110-2" title="2">     LondonBoroughs<span class="op">$</span>percent_children_in_reception_year_who_are_obese_<span class="dv">2011</span>_<span class="dv">12</span>_to_<span class="dv">2013</span>_<span class="dv">14</span>)</a></code></pre></div>
<p><img src="CASA0005_files/figure-html/unnamed-chunk-126-1.png" width="672" /></p>
</div>
<div id="pimp-my-graph" class="section level3">
<h3><span class="header-section-number">2.5.7</span> Pimp my graph!</h3>
<p>Now, of course, because this is R, we can pimp this graph using something a bit more fancy than the base graphics functions. Here we will use <code>plotly</code> an open source interactive graphing library…</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;plotly&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" title="1"><span class="kw">library</span>(plotly)</a>
<a class="sourceLine" id="cb112-2" title="2"><span class="kw">plot_ly</span>(LondonBoroughs, </a>
<a class="sourceLine" id="cb112-3" title="3">        <span class="co">#data for x axis</span></a>
<a class="sourceLine" id="cb112-4" title="4">        <span class="dt">x =</span> <span class="op">~</span>male_life_expectancy_<span class="dv">2009</span>_<span class="dv">13</span>, </a>
<a class="sourceLine" id="cb112-5" title="5">        <span class="co">#data for y axis</span></a>
<a class="sourceLine" id="cb112-6" title="6">        <span class="dt">y =</span> <span class="op">~</span>percent_children_in_reception_year_who_are_obese_<span class="dv">2011</span>_<span class="dv">12</span>_to_<span class="dv">2013</span>_<span class="dv">14</span>, </a>
<a class="sourceLine" id="cb112-7" title="7">        <span class="co">#attribute to display when hovering </span></a>
<a class="sourceLine" id="cb112-8" title="8">        <span class="dt">text =</span> <span class="op">~</span>borough, </a>
<a class="sourceLine" id="cb112-9" title="9">        <span class="dt">type =</span> <span class="st">&quot;scatter&quot;</span>, </a>
<a class="sourceLine" id="cb112-10" title="10">        <span class="dt">mode =</span> <span class="st">&quot;markers&quot;</span>)</a></code></pre></div>
<div id="htmlwidget-2d8de23d3cba28d8615b" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-2d8de23d3cba28d8615b">{"x":{"visdat":{"29981fbd12cb":["function () ","plotlyVisDat"]},"cur_data":"29981fbd12cb","attrs":{"29981fbd12cb":{"x":{},"y":{},"text":{},"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"male_life_expectancy_2009_13"},"yaxis":{"domain":[0,1],"automargin":true,"title":"percent_children_in_reception_year_who_are_obese_2011_12_to_2013_14","type":"category","categoryorder":"array","categoryarray":["10.2","10.3","10.6","11.0","11.1","11.2","11.5","11.6","12.2","12.5","12.7","12.8","13.2","13.3","13.6","5.7","6.0","7.8","8.1","9.0","9.2","9.5","9.6","9.8"]},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[84.3,77.7,81.9,80.3,80,81.3,81.1,80,79.9,80.6,78.7,78.2,79.1,80.1,82.4,79.8,80.4,79.7,78.2,82.6,81.3,78.4,78.7,80.3,78.5,80.7,81.9,78.6,80.8,77.5,79.7,79.2,81.7],"y":["11.1","13.6","9.5","11.6","12.2","7.8","9.8","11.1","11.2","12.7","13.2","13.3","10.2","11.1","9.6","10.3","9.6","11.2","10.6","9.2","6.0","11.5","11.0","9.0","12.5","10.6","5.7","12.8","8.1","12.7","10.6","9.2","11.1"],"text":["City of London","Barking and Dagenham","Barnet","Bexley","Brent","Bromley","Camden","Croydon","Ealing","Enfield","Greenwich","Hackney","Hammersmith and Fulham","Haringey","Harrow","Havering","Hillingdon","Hounslow","Islington","Kensington and Chelsea","Kingston upon Thames","Lambeth","Lewisham","Merton","Newham","Redbridge","Richmond upon Thames","Southwark","Sutton","Tower Hamlets","Waltham Forest","Wandsworth","Westminster"],"mode":"markers","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="spatial-data-in-r" class="section level3">
<h3><span class="header-section-number">2.5.8</span> Spatial Data in R</h3>
<p>This next part of the practical applies the same principles introduced above to the much more complex problem of handling spatial data within R.</p>
<p>In the remainder of this practical we will produce a map, the focus here is getting to grips with some of R’s visulisation tools and not sound analysis (I know one is useless without the other!). Good quality spatial analysis will come in the rest of the module.</p>
<p>Whilst the instructions are step by step you are encouraged to start deviating from them (trying different colours for example) to get a better understanding of what we are doing.</p>
<ol style="list-style-type: decimal">
<li>The first package we need to install for this part of the practical is <code>maptools</code> –– either find and install it using the RStudio GUI or do the following:</li>
</ol>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;maptools&quot;</span>)</a></code></pre></div>
<p>There are a few other packages we’ll need to get to grips with. Some, like <code>ggplot2</code> (one of the most influential R packages ever) are part of the <code>tidyverse</code> package we came across earlier. Others we will need to install for the first time.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" title="1"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;classInt&quot;</span>, <span class="st">&quot;tmap&quot;</span>))</a>
<a class="sourceLine" id="cb114-2" title="2"></a>
<a class="sourceLine" id="cb114-3" title="3"><span class="co"># might also need these ones</span></a>
<a class="sourceLine" id="cb114-4" title="4"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;RColorBrewer&quot;</span>, <span class="st">&quot;sp&quot;</span>, <span class="st">&quot;rgeos&quot;</span>, </a>
<a class="sourceLine" id="cb114-5" title="5">                   <span class="st">&quot;tmaptools&quot;</span>, <span class="st">&quot;sf&quot;</span>, <span class="st">&quot;downloader&quot;</span>, <span class="st">&quot;rgdal&quot;</span>, </a>
<a class="sourceLine" id="cb114-6" title="6">                   <span class="st">&quot;geojsonio&quot;</span>))</a></code></pre></div>
<ol style="list-style-type: decimal">
<li><p>Now that the packages have been installed you will not have to repeat the above steps again (when you use your account in these cluster rooms). Open a new script and save it to your working directory as <code>wk2_maps.r</code>. As before, type each of the lines of code into this window and then select and use the ctrl return keys to run them. Be sure to save your script often.</p></li>
<li><p>The first task is to load the packages we have just installed. Note, you might have some issues with the OpenStreetMap package if your installation of java on your computer doesn’t match your installation of R –– e.g. if you have installed the 64bit version of R, you also need the 64bit version of java (same with the 32bit versions) — you may also need to install the package <code>Rcpp</code> separately and try again.</p></li>
</ol>
<p>Install Java 64-bit from: <a href="https://java.com/en/download/manual.jsp" class="uri">https://java.com/en/download/manual.jsp</a></p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" title="1"><span class="co">#Load Packages (ignore any error messages about being built under a </span></a>
<a class="sourceLine" id="cb115-2" title="2"><span class="co">#different R version):</span></a>
<a class="sourceLine" id="cb115-3" title="3"><span class="kw">library</span>(maptools)</a>
<a class="sourceLine" id="cb115-4" title="4"><span class="kw">library</span>(RColorBrewer)</a>
<a class="sourceLine" id="cb115-5" title="5"><span class="kw">library</span>(classInt)</a>
<a class="sourceLine" id="cb115-6" title="6"><span class="kw">library</span>(sp)</a>
<a class="sourceLine" id="cb115-7" title="7"><span class="kw">library</span>(rgeos)</a>
<a class="sourceLine" id="cb115-8" title="8"><span class="kw">library</span>(tmap)</a>
<a class="sourceLine" id="cb115-9" title="9"><span class="kw">library</span>(tmaptools)</a>
<a class="sourceLine" id="cb115-10" title="10"><span class="kw">library</span>(sf)</a>
<a class="sourceLine" id="cb115-11" title="11"><span class="kw">library</span>(rgdal)</a>
<a class="sourceLine" id="cb115-12" title="12"><span class="kw">library</span>(geojsonio)</a></code></pre></div>
<div id="background-to-spatial-data-in-r" class="section level4">
<h4><span class="header-section-number">2.5.8.1</span> Background to spatial data in R</h4>
<p>R has a very well developed ecosystem of packages for working with Spatial Data. Early pioneers like Roger Bivand and Edzer Pebesma along with various colleagues were instrumental in writing packages to interface with some powerful open source libraries for working with spatial data, such as GDAL and GEOS. These were accessed via the <code>rgdal</code> and <code>rgeos</code> packages. The <code>maptools</code> package by Roger Bivand, amongst other things, allowed Shapefiles to be read into R. The <code>sp</code> package (along with <code>spdep</code>) by Edzer Pebesma was very important for defining a series of classes and methods for spatial data natively in R which then allowed others to write software to work with these formats. Other packages like <code>raster</code> advanced the analysis of gridded spatial data, while packages like <code>classInt</code> and <code>RColorbrewer</code> facilitated the binning of data and colouring of choropleth maps.</p>
<p>Whilst these packages were extremely important for advancing spatial data analysis in R, they were not always the most straightforward to use — making a map in R could take quite a lot of effort and they were static and visually basic. However, more recently new packages have arrived to change this. Now <code>leaflet</code> enables R to interface with the leaflet javascript library for online, dynamic maps. <code>ggplot2</code> which was developed by Hadley Wickham and colleagues radically changed the way that people thought about and created graphical objects in R, including maps, and introduced a graphical style which has been the envy of other software to the extent that there are now libraries in Python which copy the <code>ggplot2</code> style!</p>
<p><img src="allisonhorst_images/ggplot2_exploratory.png" width="450pt" style="display: block; margin: auto;" /></p>
<p>Building on all of these, the new <code>tmap</code> (Thematic Map) package has changed the game completely and now enables us to read, write and manipulate spatial data and produce visually impressive and interactive maps, very easily. In parallel, the <code>sf</code> (Simple Features) package is helping us re-think the way that spatial data can be stored and manipulated. It’s exciting times for geographic information / spatial data science!</p>
</div>
<div id="making-some-choropleth-maps" class="section level4">
<h4><span class="header-section-number">2.5.8.2</span> Making some choropleth maps</h4>
<p>Choropleth maps are thematic maps which colour areas according to some phenomenon. In our case, we are going to fill some irregular polygons (the London Boroughs) with a colour that corresponds to a particular attribute.</p>
<p>As with all plots in R, there are multiple ways we can do this. The basic <code>plot()</code> function requires no data preparation but additional effort in colour selection/ adding the map key etc. Quick plot (<code>qplot()</code>) and <code>ggplot()</code> (installed in the <code>ggplot2</code> package, part of the <code>tidyverse</code>) require some additional steps to format the spatial data but select colours and add keys etc automatically. Qplot is basically a shortcut for a quick map / plot, but if you have a lot of data use <code>ggplot()</code>. However, here, we are going to make use of the new <code>tmap</code> package which makes making maps very easy indeed. More on <code>tmap</code> when we start mapping..</p>
<ol style="list-style-type: decimal">
<li>So one mega cool thing about R is you can read spatial data in straight from the internetz! Try this below for downloading a GeoJson file…it might take a few minutes…</li>
</ol>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" title="1">EW &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;https://opendata.arcgis.com/datasets/8edafbe3276d4b56aec60991cbddda50_2.geojson&quot;</span>)</a></code></pre></div>
<pre><code>## Reading layer `Local_Authority_Districts__December_2015__Boundaries&#39; from data source `https://opendata.arcgis.com/datasets/8edafbe3276d4b56aec60991cbddda50_2.geojson&#39; using driver `GeoJSON&#39;
## Simple feature collection with 380 features and 6 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -8.649996 ymin: 49.86463 xmax: 1.768937 ymax: 60.86079
## geographic CRS: WGS 84</code></pre>
<p>Or you can do a manual download from the <a href="http://geoportal.statistics.gov.uk/datasets/8edafbe3276d4b56aec60991cbddda50_2">Office for National Statistics Open Geography Portal</a> via Download &gt; Shapefile.</p>
<p>Pull out London using the <code>str_detect()</code> function from the <code>stringr</code> package in combination with <code>filter()</code> from <code>dplyr</code> (again!). We will look for the bit of the district code that relates to London (E09) from the ‘lad15cd’ column data frame of our <code>sf</code> object.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" title="1">LondonMap&lt;-<span class="st"> </span>EW <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb118-2" title="2"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(lad15cd, <span class="st">&quot;^E09&quot;</span>))</a>
<a class="sourceLine" id="cb118-3" title="3"></a>
<a class="sourceLine" id="cb118-4" title="4"><span class="co">#plot it using the base plot function</span></a>
<a class="sourceLine" id="cb118-5" title="5"><span class="kw">qtm</span>(LondonMap)</a></code></pre></div>
<p><img src="CASA0005_files/figure-html/unnamed-chunk-134-1.png" width="672" /></p>
<ol style="list-style-type: decimal">
<li>Of course, we can also read in our data from a shapefile stored in a local directory:</li>
</ol>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" title="1"><span class="co">#read the shapefile into a simple features object</span></a>
<a class="sourceLine" id="cb119-2" title="2">BoroughMapSF &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;prac1_data/statistical-gis-boundaries-london/ESRI/London_Borough_Excluding_MHW.shp&quot;</span>)</a>
<a class="sourceLine" id="cb119-3" title="3"></a>
<a class="sourceLine" id="cb119-4" title="4"><span class="co">#plot it very quickly usking qtm (quick thematic map) to check</span></a>
<a class="sourceLine" id="cb119-5" title="5"><span class="co">#it has been read in correctly</span></a>
<a class="sourceLine" id="cb119-6" title="6"><span class="kw">qtm</span>(BoroughMapSF)</a></code></pre></div>
</div>
<div id="attribute-data" class="section level4">
<h4><span class="header-section-number">2.5.8.3</span> Attribute data</h4>
<p>OK, enough messing around, show us the maps!!</p>
<ol style="list-style-type: decimal">
<li>Hold your horses, before be can create a map, we need to join some attribute data to some boundaries, let’s do it with <code>merge()</code>, but first clean up all of our names with <code>Janitor</code> again.</li>
</ol>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" title="1">LondonData &lt;-<span class="st"> </span><span class="kw">clean_names</span>(LondonData)</a>
<a class="sourceLine" id="cb120-2" title="2"></a>
<a class="sourceLine" id="cb120-3" title="3"><span class="co">#EW is the data we read in straight from the web</span></a>
<a class="sourceLine" id="cb120-4" title="4">BoroughDataMap &lt;-<span class="st"> </span>EW <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb120-5" title="5"><span class="st">  </span><span class="kw">clean_names</span>()<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb120-6" title="6"><span class="st">  </span><span class="co"># the . here just means use the data already loaded</span></a>
<a class="sourceLine" id="cb120-7" title="7"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(lad15cd, <span class="st">&quot;^E09&quot;</span>))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb120-8" title="8"><span class="st">  </span><span class="kw">merge</span>(.,</a>
<a class="sourceLine" id="cb120-9" title="9">        LondonData, </a>
<a class="sourceLine" id="cb120-10" title="10">        <span class="dt">by.x=</span><span class="st">&quot;lad15cd&quot;</span>, </a>
<a class="sourceLine" id="cb120-11" title="11">        <span class="dt">by.y=</span><span class="st">&quot;new_code&quot;</span>,</a>
<a class="sourceLine" id="cb120-12" title="12">        <span class="dt">no.dups =</span> <span class="ot">TRUE</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb120-13" title="13"><span class="st">  </span><span class="kw">distinct</span>(.,lad15cd, </a>
<a class="sourceLine" id="cb120-14" title="14">           <span class="dt">.keep_all =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>We’ve added some more arguments to <code>distinct()</code> that mean we only have unique rows based on the code, but we keep all other variables <code>.keep_all=TRUE</code>. If you change to <code>.keep_all=FALSE</code> (which is the default) then all the other variables will be removed.</p>
<p>An alternative to <code>merge()</code> would be to use a <code>left_join()</code> (like in SQL)…but it’s the same thing as <code>merge()</code>.</p>
<p><img src="prac2_images/sql-joins.png" width="500px" style="display: block; margin: auto;" /></p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-138"></span>
<img src="prac2_images/left-join.gif" alt="Taken from Tidy explain by Garrick Aden-Buie" width="500px" />
<p class="caption">
Figure 2.1: Taken from Tidy explain by Garrick Aden-Buie
</p>
</div>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" title="1">BoroughDataMap2 &lt;-<span class="st"> </span>EW <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb121-2" title="2"><span class="st">  </span><span class="kw">clean_names</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb121-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(lad15cd, <span class="st">&quot;^E09&quot;</span>))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb121-4" title="4"><span class="st">  </span><span class="kw">left_join</span>(., </a>
<a class="sourceLine" id="cb121-5" title="5">            LondonData,</a>
<a class="sourceLine" id="cb121-6" title="6">            <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;lad15cd&quot;</span> =<span class="st"> &quot;new_code&quot;</span>))</a></code></pre></div>
<p>If there are mutliple matches then all hits are returned…</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-140"></span>
<img src="prac2_images/left-join-extra.gif" alt="Taken from Tidy explain by Garrick Aden-Buie" width="500px" />
<p class="caption">
Figure 2.2: Taken from Tidy explain by Garrick Aden-Buie
</p>
</div>
<p>However, i’ve left out <code>filter()</code> and <code>distinct()</code> which you would need to reduce the data to London and remove the duplicate City of London row afterwards…like in the step before with <code>merge</code> and as we did earlier on in the session.</p>
</div>
</div>
<div id="simple-mapping" class="section level3">
<h3><span class="header-section-number">2.5.9</span> Simple mapping</h3>
<p><code>tmap</code> follows the idea of the grammar of graphics, similar to <code>dplyr</code> being the grammar of data manipulation. Essentially with the grammar of graphics the main data being mapped defines the location somewhere on Earth (loaded with <code>tm_shape</code>). Map aesthetics are then defined with a <code>+</code>, these usually include <code>tm_fill()</code> (fill of the polygons based on a variable) + <code>tm_borders()</code> (border of polygons). However, <code>tm_polygon</code> basically combines <code>tm_fill()</code> and <code>tm_borders()</code>…</p>
<p>So to conclude, data first then <code>+</code> aesthetic syntax.</p>
<p>We’re going to create a simple map with our spatial data, mapping and cartographic practice are covered in much more detail later in the course, but for now…</p>
<ol style="list-style-type: decimal">
<li>We can create a choropleth map very quickly now using <code>qtm()</code> as we’ve done before</li>
</ol>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" title="1"><span class="kw">library</span>(tmap)</a>
<a class="sourceLine" id="cb122-2" title="2"><span class="kw">library</span>(tmaptools)</a>
<a class="sourceLine" id="cb122-3" title="3"><span class="kw">tmap_mode</span>(<span class="st">&quot;plot&quot;</span>)</a></code></pre></div>
<pre><code>## tmap mode set to plotting</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" title="1"><span class="kw">qtm</span>(BoroughDataMap, </a>
<a class="sourceLine" id="cb124-2" title="2">    <span class="dt">fill =</span> <span class="st">&quot;rate_of_job_seekers_allowance_jsa_claimants_2015&quot;</span>)</a></code></pre></div>
<p><img src="CASA0005_files/figure-html/unnamed-chunk-141-1.png" width="672" /></p>
<p>But that’s a bit basic! How about adding a basemap…to get a basemap we need to extract it from OpenStreetMap (OSM) using the <code>read_osm()</code> function from the <code>tmaptools</code> package. We talk about this in later weeks, but it’s a free editable map of the World (the Wikipedia of maps). We are going to need to create a box (termed bounding box) around London using the <code>st_box()</code> function from the <code>sf</code> package to extract the basemap image (which is a raster).</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" title="1">tmaplondon &lt;-<span class="st"> </span>BoroughDataMap <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb125-2" title="2"><span class="st">  </span><span class="kw">st_bbox</span>(.) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb125-3" title="3"><span class="st">  </span>tmaptools<span class="op">::</span><span class="kw">read_osm</span>(., <span class="dt">type =</span> <span class="st">&quot;osm&quot;</span>, <span class="dt">zoom =</span> <span class="ot">NULL</span>)</a></code></pre></div>
<p>Now we have the basemap, set <code>tmap</code> to plot, add the basemap, add the shape (our London layer), tell it which attribute to map (job seekers), the style to make the colour divisions (we explain this more in later weeks), the transparency (alpha), compass, scale and legend.</p>
<p>But remember what i explained earlier… data first then <code>+</code> aesthetic syntax. We can also double up on this, so below we have data data from our bounding box + it’s raster aesthetic (<code>tm_rgb</code>) THEN ALSO the data from our London Borough layer and it’s aesthetics. As they are the same place they plot over each other!</p>
<p>There is a bit of extra code below that we haven’t explained:</p>
<ul>
<li><code>style</code> — how to divide the data into out colour breaks</li>
<li><code>palette</code> — the colour scheme to use</li>
</ul>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" title="1"><span class="kw">tmap_mode</span>(<span class="st">&quot;plot&quot;</span>)</a>
<a class="sourceLine" id="cb126-2" title="2"></a>
<a class="sourceLine" id="cb126-3" title="3"><span class="kw">tm_shape</span>(ftmaplondon)<span class="op">+</span></a>
<a class="sourceLine" id="cb126-4" title="4"><span class="kw">tm_rgb</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb126-5" title="5"><span class="kw">tm_shape</span>(BoroughDataMap) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb126-6" title="6"><span class="kw">tm_polygons</span>(<span class="st">&quot;rate_of_job_seekers_allowance_jsa_claimants_2015&quot;</span>, </a>
<a class="sourceLine" id="cb126-7" title="7">        <span class="dt">style=</span><span class="st">&quot;jenks&quot;</span>,</a>
<a class="sourceLine" id="cb126-8" title="8">        <span class="dt">palette=</span><span class="st">&quot;YlOrBr&quot;</span>,</a>
<a class="sourceLine" id="cb126-9" title="9">        <span class="dt">midpoint=</span><span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb126-10" title="10">        <span class="dt">title=</span><span class="st">&quot;Rate per 1,000 people&quot;</span>,</a>
<a class="sourceLine" id="cb126-11" title="11">        <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb126-12" title="12"><span class="st">  </span><span class="kw">tm_compass</span>(<span class="dt">position =</span> <span class="kw">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;bottom&quot;</span>),<span class="dt">type =</span> <span class="st">&quot;arrow&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb126-13" title="13"><span class="st">  </span><span class="kw">tm_scale_bar</span>(<span class="dt">position =</span> <span class="kw">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;bottom&quot;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb126-14" title="14"><span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">title =</span> <span class="st">&quot;Job seekers&#39; Allowance Claimants&quot;</span>, <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;bottom&quot;</span>))</a></code></pre></div>
<p>So that’s our first real map done! Awesome work. But remember our <code>Life_expectancy4</code> data that we wrangled earlier. Can you think of a way to map this? So we need to</p>
<ol style="list-style-type: decimal">
<li>Merge our <code>Life_expectancy4map</code> with the spatial data <code>EW</code></li>
<li>Map our merge with <code>tmap</code></li>
</ol>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" title="1">Life_expectancy4map &lt;-<span class="st"> </span>EW <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb127-2" title="2"><span class="st">  </span><span class="kw">merge</span>(.,</a>
<a class="sourceLine" id="cb127-3" title="3">        Life_expectancy4, </a>
<a class="sourceLine" id="cb127-4" title="4">        <span class="dt">by.x=</span><span class="st">&quot;lad15cd&quot;</span>, </a>
<a class="sourceLine" id="cb127-5" title="5">        <span class="dt">by.y=</span><span class="st">&quot;new_code&quot;</span>,</a>
<a class="sourceLine" id="cb127-6" title="6">        <span class="dt">no.dups =</span> <span class="ot">TRUE</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb127-7" title="7"><span class="st">  </span><span class="kw">distinct</span>(.,lad15cd, </a>
<a class="sourceLine" id="cb127-8" title="8">           <span class="dt">.keep_all =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>Now let’s make the map!</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" title="1"><span class="kw">tmap_mode</span>(<span class="st">&quot;plot&quot;</span>)</a></code></pre></div>
<pre><code>## tmap mode set to plotting</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" title="1"><span class="kw">tm_shape</span>(tmaplondon)<span class="op">+</span></a>
<a class="sourceLine" id="cb130-2" title="2"><span class="kw">tm_rgb</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb130-3" title="3"><span class="kw">tm_shape</span>(Life_expectancy4map) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb130-4" title="4"><span class="kw">tm_polygons</span>(<span class="st">&quot;UKdiff&quot;</span>, </a>
<a class="sourceLine" id="cb130-5" title="5">        <span class="dt">style=</span><span class="st">&quot;pretty&quot;</span>,</a>
<a class="sourceLine" id="cb130-6" title="6">        <span class="dt">palette=</span><span class="st">&quot;Blues&quot;</span>,</a>
<a class="sourceLine" id="cb130-7" title="7">        <span class="dt">midpoint=</span><span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb130-8" title="8">        <span class="dt">title=</span><span class="st">&quot;Number of years&quot;</span>,</a>
<a class="sourceLine" id="cb130-9" title="9">        <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb130-10" title="10"><span class="st">  </span><span class="kw">tm_compass</span>(<span class="dt">position =</span> <span class="kw">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;bottom&quot;</span>),<span class="dt">type =</span> <span class="st">&quot;arrow&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb130-11" title="11"><span class="st">  </span><span class="kw">tm_scale_bar</span>(<span class="dt">position =</span> <span class="kw">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;bottom&quot;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb130-12" title="12"><span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">title =</span> <span class="st">&quot;Difference in life expectancy&quot;</span>, <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;bottom&quot;</span>))</a></code></pre></div>
<p><img src="CASA0005_files/figure-html/unnamed-chunk-145-1.png" width="672" /></p>
<p>There are a few subtle differences in the code of this second map if you look closely:
* Style is now <code>pretty</code> not <code>jenks</code>. Style controls where the breaks are within the data that are then assigned to each colour for mapping. <code>pretty</code> rounds to whole numbers and evenly spaces them over the data.
* Palette in now <code>Blues</code> not <code>YlOrBr</code>. Palette controls the colour of the map, you can see more options through <code>tmaptools::palette_explorer()</code></p>
</div>
</div>
<div id="tidying-data" class="section level2">
<h2><span class="header-section-number">2.6</span> Tidying data</h2>
<p>As you progress through the programme you will probably notice that there is pretty much a tool or function for anything you could want. However, there has been little reserach into creating a standardised approach for wrangling data into a common format for analysis. This is where <a href="https://www.jstatsoft.org/article/view/v059i10">Hadley Wickham’s tidy data comes in</a>. As per the <a href="https://r4ds.had.co.nz/tidy-data.html">R for Data Science book</a>, tidy data is defined using the following three rules:</p>
<ol style="list-style-type: decimal">
<li><p>Each variable must have its own column.</p></li>
<li><p>Each observation must have its own row.</p></li>
<li><p>Each value must have its own cell.</p></li>
</ol>
<p>But, as per the book, these three requirements are interrelated as you can’t only adhere to two without adhering to all three. So this gives us:</p>
<ol style="list-style-type: decimal">
<li><p>Put each dataset in a tibble</p></li>
<li><p>Put each variable in a column</p></li>
</ol>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-146"></span>
<img src="prac2_images/tidy-1.png" alt="This figure is taken directly from Grolemund and Wickham (2017) Chapter 12.Following three rules makes a dataset tidy: variables are in columns, observations are in rows, and values are in cells." width="500px" />
<p class="caption">
Figure 2.3: This figure is taken directly from Grolemund and Wickham (2017) Chapter 12.Following three rules makes a dataset tidy: variables are in columns, observations are in rows, and values are in cells.
</p>
</div>
<p>However, i also find this example from <a href="https://www.ksk-anl.com/blog/hadley-wickhams-tidy-data-in-rapidminer-part-1/">KSK analytics</a> very helpful..</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-147"></span>
<img src="prac2_images/messy-tidy-ex.png" alt="This figure is taken directly from Grolemund and Wickham (2017) Chapter 12.Following three rules makes a dataset tidy: variables are in columns, observations are in rows, and values are in cells." width="500px" />
<p class="caption">
Figure 2.4: This figure is taken directly from Grolemund and Wickham (2017) Chapter 12.Following three rules makes a dataset tidy: variables are in columns, observations are in rows, and values are in cells.
</p>
</div>
<p>Earlier we read in the data using:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" title="1">flytipping &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://data.london.gov.uk/download/fly-tipping-incidents/536278ff-a391-4f20-bc79-9e705c9b3ec0/fly-tipping-borough.csv&quot;</span>)</a></code></pre></div>
<p>But we can also do something like this to force the columns to the appopraite data types (e.g. text, numberic)</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" title="1">flytipping1 &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://data.london.gov.uk/download/fly-tipping-incidents/536278ff-a391-4f20-bc79-9e705c9b3ec0/fly-tipping-borough.csv&quot;</span>, </a>
<a class="sourceLine" id="cb132-2" title="2">                       <span class="dt">col_types =</span> <span class="kw">cols</span>(</a>
<a class="sourceLine" id="cb132-3" title="3">                         <span class="dt">code =</span> <span class="kw">col_character</span>(),</a>
<a class="sourceLine" id="cb132-4" title="4">                         <span class="dt">area =</span> <span class="kw">col_character</span>(),</a>
<a class="sourceLine" id="cb132-5" title="5">                         <span class="dt">year =</span> <span class="kw">col_character</span>(),</a>
<a class="sourceLine" id="cb132-6" title="6">                         <span class="dt">total_incidents =</span> <span class="kw">col_number</span>(),</a>
<a class="sourceLine" id="cb132-7" title="7">                         <span class="dt">total_action_taken =</span> <span class="kw">col_number</span>(),</a>
<a class="sourceLine" id="cb132-8" title="8">                         <span class="dt">warning_letters =</span> <span class="kw">col_number</span>(),</a>
<a class="sourceLine" id="cb132-9" title="9">                         <span class="dt">fixed_penalty_notices =</span> <span class="kw">col_number</span>(),</a>
<a class="sourceLine" id="cb132-10" title="10">                         <span class="dt">statutory_notices =</span> <span class="kw">col_number</span>(),</a>
<a class="sourceLine" id="cb132-11" title="11">                         <span class="dt">formal_cautions =</span> <span class="kw">col_number</span>(),</a>
<a class="sourceLine" id="cb132-12" title="12">                         <span class="dt">injunctions =</span> <span class="kw">col_number</span>(),</a>
<a class="sourceLine" id="cb132-13" title="13">                         <span class="dt">prosecutions =</span> <span class="kw">col_number</span>()</a>
<a class="sourceLine" id="cb132-14" title="14">                       ))</a>
<a class="sourceLine" id="cb132-15" title="15"><span class="co"># view the data</span></a>
<a class="sourceLine" id="cb132-16" title="16"><span class="kw">view</span>(flytipping1)</a></code></pre></div>
<p>So we have a tibble with columns of each varaible (e.g. warning letters, total actions taken) where every row is a London borough. We want make sure that each observation has its own row…it doesn’t as in the first row here we have observations for total incidents and total actions taken etc…to do this we will use <code>pivot_longer()</code>. Make sure you have the most recent version of <code>tidyverse</code> if you get an error.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" title="1"><span class="co">#convert the tibble into a tidy tibble</span></a>
<a class="sourceLine" id="cb133-2" title="2">flytipping_long &lt;-<span class="st"> </span>flytipping1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb133-3" title="3"><span class="st">  </span><span class="kw">pivot_longer</span>(</a>
<a class="sourceLine" id="cb133-4" title="4">  <span class="dt">cols =</span> <span class="dv">4</span><span class="op">:</span><span class="dv">11</span>,</a>
<a class="sourceLine" id="cb133-5" title="5">  <span class="dt">names_to =</span> <span class="st">&quot;tipping_type&quot;</span>,</a>
<a class="sourceLine" id="cb133-6" title="6">  <span class="dt">values_to =</span> <span class="st">&quot;count&quot;</span></a>
<a class="sourceLine" id="cb133-7" title="7">)</a>
<a class="sourceLine" id="cb133-8" title="8"></a>
<a class="sourceLine" id="cb133-9" title="9"><span class="co"># view the data</span></a>
<a class="sourceLine" id="cb133-10" title="10"><span class="kw">view</span>(flytipping_long)</a></code></pre></div>
<p>Do you see the difference..the data has become longer!…this is classed as tidy data as every variable has a column, every observation has a row and every value has a cell.</p>
<p>You could also use this to do the same thing…</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" title="1"><span class="co">#an alternative which just pulls everything out into a single table</span></a>
<a class="sourceLine" id="cb134-2" title="2">flytipping2 &lt;-<span class="st"> </span>flytipping1[,<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]</a></code></pre></div>
<p>But my advice would be to learn how to use the tidy tools!</p>
<p>Now let’s make it a bit more suitable for mapping with <code>pivot_wider()</code> by making coloumns for each year of each variable….in the original <code>.csv</code> we had a year coloumn that had values of 2011-2012 to 2017-2018, so if we wanted to map a specifc year we’d have to filter out the year then map. Here we can just alter the data from <code>pivot_longer()</code> using the year and tipping type…</p>
<blockquote>
<p>Note, just because the data is considered tidy doesn’t mean it is directly appropriate for mapping. It might need to be tidy for analysis.</p>
</blockquote>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" title="1"><span class="co">#pivot the tidy tibble into one that is suitable for mapping</span></a>
<a class="sourceLine" id="cb135-2" title="2">flytipping_wide &lt;-<span class="st"> </span>flytipping_long <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(</a>
<a class="sourceLine" id="cb135-3" title="3">  <span class="dt">id_cols =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,</a>
<a class="sourceLine" id="cb135-4" title="4">  <span class="dt">names_from =</span> <span class="kw">c</span>(year,tipping_type),</a>
<a class="sourceLine" id="cb135-5" title="5">  <span class="dt">names_sep =</span> <span class="st">&quot;_&quot;</span>,</a>
<a class="sourceLine" id="cb135-6" title="6">  <span class="dt">values_from =</span> count</a>
<a class="sourceLine" id="cb135-7" title="7">)</a>
<a class="sourceLine" id="cb135-8" title="8"></a>
<a class="sourceLine" id="cb135-9" title="9"><span class="kw">view</span>(flytipping_wide)</a></code></pre></div>
<p>But what if you were just interested in a specific varaible and wanted the coloums to be each year of the data…again using <code>pivot_wider()</code></p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" title="1">widefly &lt;-<span class="st"> </span>flytipping2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(</a>
<a class="sourceLine" id="cb136-2" title="2">  <span class="dt">names_from =</span> year, </a>
<a class="sourceLine" id="cb136-3" title="3">  <span class="dt">values_from =</span> total_incidents)</a></code></pre></div>
<p>You could now join this to the London borough <code>.shp</code> and produce a map…</p>
<p>What’s the take home from this? Basically always try to put your data into a certain format before doing further analysis on it as it will be easier for you to determine the right tools to select.</p>
</div>
<div id="feedback-1" class="section level2">
<h2><span class="header-section-number">2.7</span> Feedback</h2>
<p>Was anything that we explained unclear this week or was something really clear…let us know using the <a href="https://forms.gle/w2GUDYc7tSavGy7r6">feedback form</a>. It’s anonymous and we’ll use the responses to clear any issues up in the future / adapt the material.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="geographic-information.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rasters-descriptive-statistics-and-interpolation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/andrewmaclachlan/CASA0005repo/edit/master/02-prac2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
